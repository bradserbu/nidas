<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>nidas: nidas/linux/irig/pc104sg.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">nidas
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_63299fbf0c9c17e6aecce65eb5f7e6e7.html">nidas</a></li><li class="navelem"><a class="el" href="dir_3f87f8ed86e766800eb62f0a96dc3d82.html">linux</a></li><li class="navelem"><a class="el" href="dir_8264e0539f2abf04e4bc8d7d597fe0d2.html">irig</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pc104sg.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/kernel.h&gt;</code><br/>
<code>#include &lt;linux/module.h&gt;</code><br/>
<code>#include &lt;linux/version.h&gt;</code><br/>
<code>#include &lt;linux/fs.h&gt;</code><br/>
<code>#include &lt;linux/cdev.h&gt;</code><br/>
<code>#include &lt;linux/device.h&gt;</code><br/>
<code>#include &lt;linux/poll.h&gt;</code><br/>
<code>#include &lt;linux/delay.h&gt;</code><br/>
<code>#include &lt;linux/ioport.h&gt;</code><br/>
<code>#include &lt;linux/syscalls.h&gt;</code><br/>
<code>#include &lt;linux/time.h&gt;</code><br/>
<code>#include &lt;linux/unistd.h&gt;</code><br/>
<code>#include &lt;linux/wait.h&gt;</code><br/>
<code>#include &lt;linux/interrupt.h&gt;</code><br/>
<code>#include &lt;linux/workqueue.h&gt;</code><br/>
<code>#include &lt;linux/sched.h&gt;</code><br/>
<code>#include &lt;linux/slab.h&gt;</code><br/>
<code>#include &lt;asm/atomic.h&gt;</code><br/>
<code>#include &lt;asm/io.h&gt;</code><br/>
<code>#include &lt;asm/uaccess.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="ver__macros_8h_source.html">nidas/linux/ver_macros.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="irigclock_8h_source.html">nidas/linux/irigclock.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="isa__bus_8h_source.html">nidas/linux/isa_bus.h</a>&gt;</code><br/>
<code>#include &lt;nidas/linux/Revision.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="klog_8h_source.html">nidas/linux/klog.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="pc104sg_8h_source.html">pc104sg.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pc104sg.c:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c__incl.png" border="0" usemap="#nidas_2linux_2irig_2pc104sg_8c" alt=""/></div>
<map name="nidas_2linux_2irig_2pc104sg_8c" id="nidas_2linux_2irig_2pc104sg_8c">
<area shape="rect" id="node22" href="ver__macros_8h.html" title="nidas/linux/ver_macros.h" alt="" coords="2578,80,2757,107"/><area shape="rect" id="node23" href="irigclock_8h.html" title="nidas/linux/irigclock.h" alt="" coords="2782,80,2937,107"/><area shape="rect" id="node28" href="isa__bus_8h.html" title="nidas/linux/isa_bus.h" alt="" coords="2962,80,3115,107"/><area shape="rect" id="node30" href="klog_8h.html" title="nidas/linux/klog.h" alt="" coords="3320,80,3451,107"/><area shape="rect" id="node31" href="pc104sg_8h.html" title="pc104sg.h" alt="" coords="3475,80,3563,107"/><area shape="rect" id="node25" href="types_8h.html" title="types.h" alt="" coords="2876,155,2945,181"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structclockSnapShot.html">clockSnapShot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One a second, or when clockAction == RESET_COUNTERS, the interrupt service routine grabs a snapshot of the following values.  <a href="structclockSnapShot.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirig__device.html">irig_device</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Device structure used in the file operations of the character device which provides IRIG samples.  <a href="structirig__device.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpc104sg__board.html">pc104sg_board</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Everything needed to access the board.  <a href="structpc104sg__board.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aebf73c633424be27d6f3860ff8174e07"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aebf73c633424be27d6f3860ff8174e07">REPO_REVISION</a>&#160;&#160;&#160;&quot;unknown&quot;</td></tr>
<tr class="separator:aebf73c633424be27d6f3860ff8174e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda1e5af1f15169b7b5d79a287c40b51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#afda1e5af1f15169b7b5d79a287c40b51">IRQF_SHARED</a>&#160;&#160;&#160;SA_SHIRQ</td></tr>
<tr class="separator:afda1e5af1f15169b7b5d79a287c40b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa002f43cad7f1b55e3276268cd6ee7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a4fa002f43cad7f1b55e3276268cd6ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeedd690418e2b6c159ce4f34cca764cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aeedd690418e2b6c159ce4f34cca764cc">MSEC_PER_INTERRUPT</a>&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#ad75544a73dfad2046264f3d8fc9d16e1">MSECS_PER_SEC</a> / <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>)</td></tr>
<tr class="memdesc:aeedd690418e2b6c159ce4f34cca764cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of milliseconds per interrupt  <a href="#aeedd690418e2b6c159ce4f34cca764cc">More...</a><br/></td></tr>
<tr class="separator:aeedd690418e2b6c159ce4f34cca764cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b95bf012396b2bf9785b20bd7e17a6a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a4b95bf012396b2bf9785b20bd7e17a6a">TMSEC_PER_INTERRUPT</a>&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a> / <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>)</td></tr>
<tr class="memdesc:a4b95bf012396b2bf9785b20bd7e17a6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of 1/10ths of milliseconds per interrupt  <a href="#a4b95bf012396b2bf9785b20bd7e17a6a">More...</a><br/></td></tr>
<tr class="separator:a4b95bf012396b2bf9785b20bd7e17a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab19a4696978f0dc2d6fce85aa05e0d60"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">INTERRUPTS_PER_TASKLET</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ab19a4696978f0dc2d6fce85aa05e0d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">We schedule the bottom-half tasklet after every INTERRUPTS_PER_TASKLET interrupts.  <a href="#ab19a4696978f0dc2d6fce85aa05e0d60">More...</a><br/></td></tr>
<tr class="separator:ab19a4696978f0dc2d6fce85aa05e0d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecc3f5e4c4ea6dc0838decbae13effc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a8ecc3f5e4c4ea6dc0838decbae13effc">TMSEC_PER_SOFT_TIC</a></td></tr>
<tr class="memdesc:a8ecc3f5e4c4ea6dc0838decbae13effc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment of the software clock on each schedule of the tasklet.  <a href="#a8ecc3f5e4c4ea6dc0838decbae13effc">More...</a><br/></td></tr>
<tr class="separator:a8ecc3f5e4c4ea6dc0838decbae13effc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a70e38dd38b1feafb4c4d80f9ce9f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#af9a70e38dd38b1feafb4c4d80f9ce9f0">MAX_TASKLET_COUNTER</a>&#160;&#160;&#160;(10 * <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a> * <a class="el" href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">INTERRUPTS_PER_TASKLET</a>)</td></tr>
<tr class="memdesc:af9a70e38dd38b1feafb4c4d80f9ce9f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow for counting up to 10 seconds, so that we can do 0.1hz callbacks.  <a href="#af9a70e38dd38b1feafb4c4d80f9ce9f0">More...</a><br/></td></tr>
<tr class="separator:af9a70e38dd38b1feafb4c4d80f9ce9f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ed04f9ee13a19c2059952f49eab3c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ac4ed04f9ee13a19c2059952f49eab3c6">CALLBACK_POOL_SIZE</a>&#160;&#160;&#160;64   /* number of callbacks we can support */</td></tr>
<tr class="separator:ac4ed04f9ee13a19c2059952f49eab3c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad20ced3a753aa389e1cb55775649c329"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad20ced3a753aa389e1cb55775649c329">PC104SG_SAMPLE_QUEUE_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:ad20ced3a753aa389e1cb55775649c329"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the circular buffer of output samples.  <a href="#ad20ced3a753aa389e1cb55775649c329">More...</a><br/></td></tr>
<tr class="separator:ad20ced3a753aa389e1cb55775649c329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1352c42f114da199bdc91b99741b662"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad1352c42f114da199bdc91b99741b662">MAX_TMSEC_SINCE_LAST_SYNC</a>&#160;&#160;&#160;(5 * <a class="el" href="time__constants_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a>)</td></tr>
<tr class="memdesc:ad1352c42f114da199bdc91b99741b662"><td class="mdescLeft">&#160;</td><td class="mdescRight">Values that are used to detect whether the bottom half tasklet has gotten out of sync with real-time.  <a href="#ad1352c42f114da199bdc91b99741b662">More...</a><br/></td></tr>
<tr class="separator:ad1352c42f114da199bdc91b99741b662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11528d10d5838afd2d0ec2f5841167cf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a11528d10d5838afd2d0ec2f5841167cf">SECS_PER_HOUR</a>&#160;&#160;&#160;(60 * 60)</td></tr>
<tr class="memdesc:a11528d10d5838afd2d0ec2f5841167cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">macros borrowed from glibc/time functions  <a href="#a11528d10d5838afd2d0ec2f5841167cf">More...</a><br/></td></tr>
<tr class="separator:a11528d10d5838afd2d0ec2f5841167cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bc10904b2b09a717f1fb81cce017de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#a11528d10d5838afd2d0ec2f5841167cf">SECS_PER_HOUR</a> * 24)</td></tr>
<tr class="separator:ae6bc10904b2b09a717f1fb81cce017de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6703e9797b10e29b0d263aeb823ef076"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a6703e9797b10e29b0d263aeb823ef076">my_isleap</a>(year)&#160;&#160;&#160;((year) % 4 == 0 &amp;&amp; ((year) % 100 != 0 || (year) % 400 == 0))</td></tr>
<tr class="separator:a6703e9797b10e29b0d263aeb823ef076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ceda26a59b995f39bf22eb1061c781a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a>(a, b)&#160;&#160;&#160;((a) / (b) - ((a) % (b) &lt; 0))</td></tr>
<tr class="separator:a5ceda26a59b995f39bf22eb1061c781a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08e34981bd911e8f61169bae496fdb14"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a08e34981bd911e8f61169bae496fdb14">LEAPS_THRU_END_OF</a>(y)&#160;&#160;&#160;(<a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 4) - <a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 100) + <a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 400))</td></tr>
<tr class="separator:a08e34981bd911e8f61169bae496fdb14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a20eeb1469b8898abac3c17173c078af4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4">clockAction</a> { <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, 
<a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4a1118121b5aa260fdb822fe11dd34c6cd">NO_ACTION</a>
 }</td></tr>
<tr class="memdesc:a20eeb1469b8898abac3c17173c078af4"><td class="mdescLeft">&#160;</td><td class="mdescRight">What to do with the with the software clock and loop counter in the bottom-half tasklet.  <a href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4">More...</a><br/></td></tr>
<tr class="separator:a20eeb1469b8898abac3c17173c078af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65c98d2b2bce9d94da28a7ffcb6d25a4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4">clockState</a> { <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4ad20e90f7b92275771bfc864f966ef534">SYNCD_SET</a>, 
<a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb">UNSYNCD_SET</a>
 }</td></tr>
<tr class="memdesc:a65c98d2b2bce9d94da28a7ffcb6d25a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enumeration of the state of the software clock.  <a href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4">More...</a><br/></td></tr>
<tr class="separator:a65c98d2b2bce9d94da28a7ffcb6d25a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a490c7f4a4bd6529df1faad64b79ab87b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87b">notifyClients</a> { <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87baa8904950cd23bfd9dfdf2aed277c0bbb">NO_NOTIFY</a>, 
<a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87ba3b123b0d98b12bf2f2cb047e9d70a197">NOTIFY_CLIENTS</a>
 }</td></tr>
<tr class="memdesc:a490c7f4a4bd6529df1faad64b79ab87b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to notify callback clients if clockAction is RESET_COUNTERS.  <a href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87b">More...</a><br/></td></tr>
<tr class="separator:a490c7f4a4bd6529df1faad64b79ab87b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7cc4f1611721a60ee94d83fced443472"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a7cc4f1611721a60ee94d83fced443472">MODULE_AUTHOR</a> (&quot;Gordon Maclean &lt;maclean@ucar.edu&gt;&quot;)</td></tr>
<tr class="separator:a7cc4f1611721a60ee94d83fced443472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a529dabdfb5c57007d85baa777f46ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a9a529dabdfb5c57007d85baa777f46ba">MODULE_DESCRIPTION</a> (&quot;PC104-SG IRIG Card Driver&quot;)</td></tr>
<tr class="separator:a9a529dabdfb5c57007d85baa777f46ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad94b36675e7eb067ea3ce6ff9e244a44">MODULE_LICENSE</a> (&quot;GPL&quot;)</td></tr>
<tr class="separator:ad94b36675e7eb067ea3ce6ff9e244a44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5254ca30e6e46bc7b28c17b101e23cd2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5254ca30e6e46bc7b28c17b101e23cd2">MODULE_VERSION</a> (<a class="el" href="viper__dio_8c.html#aebf73c633424be27d6f3860ff8174e07">REPO_REVISION</a>)</td></tr>
<tr class="separator:a5254ca30e6e46bc7b28c17b101e23cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5622c8fa39fbe2ad8fb384dcf304d368"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5622c8fa39fbe2ad8fb384dcf304d368">module_param</a> (<a class="el" href="pc104sg_8c.html#a0948792bb02e130a71d831c860899f32">Irq</a>, int, 0)</td></tr>
<tr class="separator:a5622c8fa39fbe2ad8fb384dcf304d368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1556c77f5444fa8d3a58ccfd68b59ba2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a1556c77f5444fa8d3a58ccfd68b59ba2">module_param</a> (<a class="el" href="ncar__a2d_8c.html#a95a394bee293020fb3d2ef208731bdf1">IoPort</a>, int, 0)</td></tr>
<tr class="separator:a1556c77f5444fa8d3a58ccfd68b59ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea84885ad7871ade4f7cdf5a647620e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#acea84885ad7871ade4f7cdf5a647620e">module_param</a> (<a class="el" href="pc104sg_8c.html#a8d6910fa51517497a3f2ba6b5d27d726">A2DClockFreq</a>, int, 0)</td></tr>
<tr class="separator:acea84885ad7871ade4f7cdf5a647620e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f4885517c64c15fa1e084d892154f5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a77f4885517c64c15fa1e084d892154f5">EXPORT_SYMBOL</a> (<a class="el" href="pc104sg_8c.html#a4b0b519936819c0b422e6938a779efd6">TMsecClock</a>)</td></tr>
<tr class="separator:a77f4885517c64c15fa1e084d892154f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75c74ae09d9fbe3745d49328fe46fb09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a75c74ae09d9fbe3745d49328fe46fb09">EXPORT_SYMBOL</a> (<a class="el" href="pc104sg_8c.html#a06e980bbaeb04990c34e7d831c3dbc9c">ReadClock</a>)</td></tr>
<tr class="separator:a75c74ae09d9fbe3745d49328fe46fb09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011f0657825d40831b8eac637e2bcea5"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5">clockStateString</a> (void)</td></tr>
<tr class="separator:a011f0657825d40831b8eac637e2bcea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6be98cca820db8ed3d7b06aecfafc2ab"><td class="memItemLeft" align="right" valign="top">struct irig_callback *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab">register_irig_callback</a> (irig_callback_func *callback, irig_callback_func *resync, enum <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72">irigClockRates</a> <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>, void *privateData, int *errp)</td></tr>
<tr class="memdesc:a6be98cca820db8ed3d7b06aecfafc2ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module function that allows other modules to register their callback function to be called at the given rate.  <a href="#a6be98cca820db8ed3d7b06aecfafc2ab">More...</a><br/></td></tr>
<tr class="separator:a6be98cca820db8ed3d7b06aecfafc2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c07adedda372e0c5a4a23c9d67376a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad0c07adedda372e0c5a4a23c9d67376a">EXPORT_SYMBOL</a> (<a class="el" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab">register_irig_callback</a>)</td></tr>
<tr class="separator:ad0c07adedda372e0c5a4a23c9d67376a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0aacc0145154de250d49a3def0888af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af">unregister_irig_callback</a> (struct irig_callback *cb)</td></tr>
<tr class="memdesc:ae0aacc0145154de250d49a3def0888af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modules call this function to dequeue their callbacks.  <a href="#ae0aacc0145154de250d49a3def0888af">More...</a><br/></td></tr>
<tr class="separator:ae0aacc0145154de250d49a3def0888af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c39ec37091e0992b2eefdcf7cd91ab0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a6c39ec37091e0992b2eefdcf7cd91ab0">EXPORT_SYMBOL</a> (<a class="el" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af">unregister_irig_callback</a>)</td></tr>
<tr class="separator:a6c39ec37091e0992b2eefdcf7cd91ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf72cc4ce7d06abb88b67911ad702f9d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aaf72cc4ce7d06abb88b67911ad702f9d">flush_irig_callbacks</a> (void)</td></tr>
<tr class="separator:aaf72cc4ce7d06abb88b67911ad702f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ae99999125029c7777df9840b0ec8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a24ae99999125029c7777df9840b0ec8c">EXPORT_SYMBOL</a> (<a class="el" href="pc104sg_8c.html#aaf72cc4ce7d06abb88b67911ad702f9d">flush_irig_callbacks</a>)</td></tr>
<tr class="separator:a24ae99999125029c7777df9840b0ec8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d33fce3e2b16674e7015304617be580"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580">handlePendingCallbacks</a> (void)</td></tr>
<tr class="memdesc:a0d33fce3e2b16674e7015304617be580"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle pending adds and removes of callbacks from the active list for the appropriate rate.  <a href="#a0d33fce3e2b16674e7015304617be580">More...</a><br/></td></tr>
<tr class="separator:a0d33fce3e2b16674e7015304617be580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6e50ded9d3f5c70e8bd2b7409b5370"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370">free_callbacks</a> (void)</td></tr>
<tr class="memdesc:a4a6e50ded9d3f5c70e8bd2b7409b5370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup function that un-registers all callbacks.  <a href="#a4a6e50ded9d3f5c70e8bd2b7409b5370">More...</a><br/></td></tr>
<tr class="separator:a4a6e50ded9d3f5c70e8bd2b7409b5370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59be4e9f51e3e4c7cba41fd4244ab801"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801">resetHeartBeatLatch</a> (void)</td></tr>
<tr class="memdesc:a59be4e9f51e3e4c7cba41fd4244ab801"><td class="mdescLeft">&#160;</td><td class="mdescRight">After receiving a heartbeat interrupt, one must reset the heartbeat latch in the handler.  <a href="#a59be4e9f51e3e4c7cba41fd4244ab801">More...</a><br/></td></tr>
<tr class="separator:a59be4e9f51e3e4c7cba41fd4244ab801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a274ddac1815204b14f718e7de3dbefb8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a274ddac1815204b14f718e7de3dbefb8">enableHeartBeatInt</a> (void)</td></tr>
<tr class="memdesc:a274ddac1815204b14f718e7de3dbefb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable heart beat interrupts.  <a href="#a274ddac1815204b14f718e7de3dbefb8">More...</a><br/></td></tr>
<tr class="separator:a274ddac1815204b14f718e7de3dbefb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89efb62061998a5877220ef066f5578a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a89efb62061998a5877220ef066f5578a">resetMatchLatch</a> (void)</td></tr>
<tr class="memdesc:a89efb62061998a5877220ef066f5578a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable heart beat interrupts.  <a href="#a89efb62061998a5877220ef066f5578a">More...</a><br/></td></tr>
<tr class="separator:a89efb62061998a5877220ef066f5578a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac928e2ad48c95a94c86aa08962f32410"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410">disableAllInts</a> (void)</td></tr>
<tr class="memdesc:ac928e2ad48c95a94c86aa08962f32410"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable external time tag interrupt.  <a href="#ac928e2ad48c95a94c86aa08962f32410">More...</a><br/></td></tr>
<tr class="separator:ac928e2ad48c95a94c86aa08962f32410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1135b8eef3e16d1c2e3b2b26380e6198"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198">readDPRAM</a> (unsigned char addr, unsigned char *val)</td></tr>
<tr class="memdesc:a1135b8eef3e16d1c2e3b2b26380e6198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read dual port RAM.  <a href="#a1135b8eef3e16d1c2e3b2b26380e6198">More...</a><br/></td></tr>
<tr class="separator:a1135b8eef3e16d1c2e3b2b26380e6198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8f771cfe673267603932b907013adeb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb">requestDPRAM</a> (unsigned char addr)</td></tr>
<tr class="memdesc:ad8f771cfe673267603932b907013adeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb" title="The requestDPRAM()/getRequestedDPRAM() pair allow us to break a dual-port read into two parts...">requestDPRAM()</a>/getRequestedDPRAM() pair allow us to break a dual-port read into two parts.  <a href="#ad8f771cfe673267603932b907013adeb">More...</a><br/></td></tr>
<tr class="separator:ad8f771cfe673267603932b907013adeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9376577710fef9a923b2bfcb8cf7bc8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8">getRequestedDPRAM</a> (unsigned char *val)</td></tr>
<tr class="separator:aa9376577710fef9a923b2bfcb8cf7bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57fdfe15265a20ca1347a96d84dbe25e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM</a> (unsigned char addr, unsigned char value)</td></tr>
<tr class="memdesc:a57fdfe15265a20ca1347a96d84dbe25e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a value in dual port RAM.  <a href="#a57fdfe15265a20ca1347a96d84dbe25e">More...</a><br/></td></tr>
<tr class="separator:a57fdfe15265a20ca1347a96d84dbe25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2077081dfbe4d67b39c8a0a743b5f27f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput</a> (int <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>)</td></tr>
<tr class="separator:a2077081dfbe4d67b39c8a0a743b5f27f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318a007c64a1bd79e457a01c703690bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb">setPrimarySyncReference</a> (unsigned char val)</td></tr>
<tr class="memdesc:a318a007c64a1bd79e457a01c703690bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the primary time reference.  <a href="#a318a007c64a1bd79e457a01c703690bb">More...</a><br/></td></tr>
<tr class="separator:a318a007c64a1bd79e457a01c703690bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47acaa00ccc88f829fa6730daf6f17a1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a47acaa00ccc88f829fa6730daf6f17a1">setTimeCodeInputSelect</a> (unsigned char val)</td></tr>
<tr class="separator:a47acaa00ccc88f829fa6730daf6f17a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2ec41a4045a974e5c6f4ccf7ee2f0cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output</a> (int <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>)</td></tr>
<tr class="separator:ae2ec41a4045a974e5c6f4ccf7ee2f0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d2c89e71466805c8f6a69ab85d6a75d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5d2c89e71466805c8f6a69ab85d6a75d">counterRejam</a> (void)</td></tr>
<tr class="separator:a5d2c89e71466805c8f6a69ab85d6a75d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5171347c11b66993adf4d8d37915a9cc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5171347c11b66993adf4d8d37915a9cc">do_gettimeofday_tv32</a> (struct <a class="el" href="structtimeval32.html">timeval32</a> *tv32)</td></tr>
<tr class="separator:a5171347c11b66993adf4d8d37915a9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63a2129e5c40030d8a7455b9f38674b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b">getTimeFields</a> (struct irigTime *ti, int offset)</td></tr>
<tr class="memdesc:ab63a2129e5c40030d8a7455b9f38674b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read time from the registers.  <a href="#ab63a2129e5c40030d8a7455b9f38674b">More...</a><br/></td></tr>
<tr class="separator:ab63a2129e5c40030d8a7455b9f38674b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad3c2e372d016be6dd82b8dd834f1ee8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aad3c2e372d016be6dd82b8dd834f1ee8">getTimeUsec</a> ()</td></tr>
<tr class="memdesc:aad3c2e372d016be6dd82b8dd834f1ee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read sub-second time fields from the card, return microseconds.  <a href="#aad3c2e372d016be6dd82b8dd834f1ee8">More...</a><br/></td></tr>
<tr class="separator:aad3c2e372d016be6dd82b8dd834f1ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdb74e80c66172da496b8908c84ab2b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time</a> (struct irigTime *ti)</td></tr>
<tr class="memdesc:abdb74e80c66172da496b8908c84ab2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get main clock.  <a href="#abdb74e80c66172da496b8908c84ab2b8">More...</a><br/></td></tr>
<tr class="separator:abdb74e80c66172da496b8908c84ab2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5abbfb2b7452e89344e147b0ee88fb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig</a> (const struct timespec *ts, struct irigTime *ti)</td></tr>
<tr class="memdesc:aef5abbfb2b7452e89344e147b0ee88fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Break a struct <a class="el" href="structtimeval32.html">timeval32</a> into the fields of a struct irigTime.  <a href="#aef5abbfb2b7452e89344e147b0ee88fb">More...</a><br/></td></tr>
<tr class="separator:aef5abbfb2b7452e89344e147b0ee88fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3721fb10b228d8970ff9ac1a8d5acef8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a3721fb10b228d8970ff9ac1a8d5acef8">timeval32Toirig</a> (const struct <a class="el" href="structtimeval32.html">timeval32</a> *tv, struct irigTime *ti)</td></tr>
<tr class="separator:a3721fb10b228d8970ff9ac1a8d5acef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c439fe41aa10b813fb26efea64beab"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a42c439fe41aa10b813fb26efea64beab">timevalToirig</a> (const struct timeval *tv, struct irigTime *ti)</td></tr>
<tr class="separator:a42c439fe41aa10b813fb26efea64beab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e0bc7ad9fa3c2e4fed4581b87ece40"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40">irigTotimespec</a> (const struct irigTime *ti, struct timespec *ts)</td></tr>
<tr class="memdesc:a98e0bc7ad9fa3c2e4fed4581b87ece40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a struct irigTime into a struct timespec.  <a href="#a98e0bc7ad9fa3c2e4fed4581b87ece40">More...</a><br/></td></tr>
<tr class="separator:a98e0bc7ad9fa3c2e4fed4581b87ece40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38b43c62a116640469a2281a5cda4d3d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d">irigTotimeval32</a> (const struct irigTime *ti, struct <a class="el" href="structtimeval32.html">timeval32</a> *tv)</td></tr>
<tr class="memdesc:a38b43c62a116640469a2281a5cda4d3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a struct irigTime into a struct <a class="el" href="structtimeval32.html">timeval32</a>.  <a href="#a38b43c62a116640469a2281a5cda4d3d">More...</a><br/></td></tr>
<tr class="separator:a38b43c62a116640469a2281a5cda4d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d31718700b10da9a5ca0032e15dd1d7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7">get_irig_time_tv32</a> (struct <a class="el" href="structtimeval32.html">timeval32</a> *tv32)</td></tr>
<tr class="separator:a7d31718700b10da9a5ca0032e15dd1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a9975a8b7e0f46a701e359b0e7e4aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#af1a9975a8b7e0f46a701e359b0e7e4aa">irig_clock_gettime</a> (struct timespec *tp)</td></tr>
<tr class="memdesc:af1a9975a8b7e0f46a701e359b0e7e4aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is available for use by external modules.  <a href="#af1a9975a8b7e0f46a701e359b0e7e4aa">More...</a><br/></td></tr>
<tr class="separator:af1a9975a8b7e0f46a701e359b0e7e4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143d71d2bd0e85875e088abed08a67d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a143d71d2bd0e85875e088abed08a67d9">get_msec_clock_resolution</a> ()</td></tr>
<tr class="separator:a143d71d2bd0e85875e088abed08a67d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d97dfdfffe705858d994fe50095a62"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62">setYear</a> (int val)</td></tr>
<tr class="memdesc:ad1d97dfdfffe705858d994fe50095a62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get external event time.  <a href="#ad1d97dfdfffe705858d994fe50095a62">More...</a><br/></td></tr>
<tr class="separator:ad1d97dfdfffe705858d994fe50095a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb929ec8d4c69d83a4b4d9134ff41374"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime</a> (struct irigTime *ti)</td></tr>
<tr class="memdesc:adb929ec8d4c69d83a4b4d9134ff41374"><td class="mdescLeft">&#160;</td><td class="mdescRight">The major time consists of the day-of-year, hour, minute and second fields.  <a href="#adb929ec8d4c69d83a4b4d9134ff41374">More...</a><br/></td></tr>
<tr class="separator:adb929ec8d4c69d83a4b4d9134ff41374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9aa0f7f6e66c028b3842c03411f8fc8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers</a> (struct <a class="el" href="structtimeval32.html">timeval32</a> *tv, int round)</td></tr>
<tr class="memdesc:ac9aa0f7f6e66c028b3842c03411f8fc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the software clock and the tasklet loop counter based on a clock value in a timeval struct.  <a href="#ac9aa0f7f6e66c028b3842c03411f8fc8">More...</a><br/></td></tr>
<tr class="separator:ac9aa0f7f6e66c028b3842c03411f8fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa653a40c114547800a6bf381440cb56"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56">checkSoftTicker</a> (int newClock, int currClock, int scale, int notify)</td></tr>
<tr class="memdesc:aaa653a40c114547800a6bf381440cb56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to determine if our software clock and client callbacks are keeping up with real-time.  <a href="#aaa653a40c114547800a6bf381440cb56">More...</a><br/></td></tr>
<tr class="separator:aaa653a40c114547800a6bf381440cb56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa73b925b4cef457efc768966179f095b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aa73b925b4cef457efc768966179f095b">doCallbacklist</a> (int <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>)</td></tr>
<tr class="memdesc:aa73b925b4cef457efc768966179f095b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke the callback functions for a given rate.  <a href="#aa73b925b4cef457efc768966179f095b">More...</a><br/></td></tr>
<tr class="separator:aa73b925b4cef457efc768966179f095b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44ac6443e8cb3692ba6fe664d1307d9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a44ac6443e8cb3692ba6fe664d1307d9e">doResyncCallbacks</a> (void)</td></tr>
<tr class="memdesc:a44ac6443e8cb3692ba6fe664d1307d9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoke all resync callback functions.  <a href="#a44ac6443e8cb3692ba6fe664d1307d9e">More...</a><br/></td></tr>
<tr class="separator:a44ac6443e8cb3692ba6fe664d1307d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed23bdab82ef3a1206f5890b2c0d20ed"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz</a> (unsigned long dev)</td></tr>
<tr class="memdesc:aed23bdab82ef3a1206f5890b2c0d20ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tasklet called 100 times/second in softare interrupt context.  <a href="#aed23bdab82ef3a1206f5890b2c0d20ed">More...</a><br/></td></tr>
<tr class="separator:aed23bdab82ef3a1206f5890b2c0d20ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a532b77817b333266c5de6eb671c7ea86"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction</a> (void *ptr)</td></tr>
<tr class="separator:a532b77817b333266c5de6eb671c7ea86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefe6cedb99237a8eda75efad5dfa4468"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468">requestExtendedStatus</a> (void)</td></tr>
<tr class="separator:aefe6cedb99237a8eda75efad5dfa4468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf941eb0fe5482665c540a976d2b220a"><td class="memItemLeft" align="right" valign="top">static irqreturn_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr</a> (int irq, void *callbackPtr)</td></tr>
<tr class="separator:aaf941eb0fe5482665c540a976d2b220a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18bccf2dde74934c01bb1fdeccfedec1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a18bccf2dde74934c01bb1fdeccfedec1">pc104sg_open</a> (struct inode *inode, struct file *filp)</td></tr>
<tr class="separator:a18bccf2dde74934c01bb1fdeccfedec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae887d53a79983eaacf707bcb3abc2999"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ae887d53a79983eaacf707bcb3abc2999">pc104sg_release</a> (struct inode *inode, struct file *filp)</td></tr>
<tr class="separator:ae887d53a79983eaacf707bcb3abc2999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d9bfcb1413f0ffd59dffaa449c06a3"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ac9d9bfcb1413f0ffd59dffaa449c06a3">pc104sg_poll</a> (struct file *filp, poll_table *wait)</td></tr>
<tr class="separator:ac9d9bfcb1413f0ffd59dffaa449c06a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e3b129ef3a997869e581bdd3b3a247b"><td class="memItemLeft" align="right" valign="top">static ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a5e3b129ef3a997869e581bdd3b3a247b">pc104sg_read</a> (struct file *filp, char __user *buf, size_t count, loff_t *f_pos)</td></tr>
<tr class="separator:a5e3b129ef3a997869e581bdd3b3a247b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c8b15054d75a173e58bc7f30a291cd"><td class="memItemLeft" align="right" valign="top">static long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl</a> (struct file *filp, unsigned int cmd, unsigned long arg)</td></tr>
<tr class="separator:ae8c8b15054d75a173e58bc7f30a291cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab00cb0f54ed7cb6a67e20eab87281e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup</a> (void)</td></tr>
<tr class="separator:aaab00cb0f54ed7cb6a67e20eab87281e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc332f30a2b0de61fb66114ac2da63d9"><td class="memItemLeft" align="right" valign="top">static int __init&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init</a> (void)</td></tr>
<tr class="separator:acc332f30a2b0de61fb66114ac2da63d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58cb3ef53fe6d02b9324889d0a049ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aa58cb3ef53fe6d02b9324889d0a049ec">module_init</a> (<a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init</a>)</td></tr>
<tr class="separator:aa58cb3ef53fe6d02b9324889d0a049ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a335c0dfb13b31018fd3660334e995bd7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a335c0dfb13b31018fd3660334e995bd7">module_exit</a> (<a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup</a>)</td></tr>
<tr class="separator:a335c0dfb13b31018fd3660334e995bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7629105fe7a35b297bd1df5304d2e4d7"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a7629105fe7a35b297bd1df5304d2e4d7">driver_name</a> = &quot;pc104sg&quot;</td></tr>
<tr class="separator:a7629105fe7a35b297bd1df5304d2e4d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d6910fa51517497a3f2ba6b5d27d726"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a8d6910fa51517497a3f2ba6b5d27d726">A2DClockFreq</a> = 10000</td></tr>
<tr class="separator:a8d6910fa51517497a3f2ba6b5d27d726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0948792bb02e130a71d831c860899f32"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a0948792bb02e130a71d831c860899f32">Irq</a> = 10</td></tr>
<tr class="separator:a0948792bb02e130a71d831c860899f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb8e7302c29c651ba6823416ca50a32"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a2bb8e7302c29c651ba6823416ca50a32">IoPort</a> = 0x2a0</td></tr>
<tr class="separator:a2bb8e7302c29c651ba6823416ca50a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b0b519936819c0b422e6938a779efd6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a4b0b519936819c0b422e6938a779efd6">TMsecClock</a> [2] = { 0, 0 }</td></tr>
<tr class="memdesc:a4b0b519936819c0b422e6938a779efd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A toggle buffer containing the current clock value in tenths of milliseconds since UTC midnight.  <a href="#a4b0b519936819c0b422e6938a779efd6">More...</a><br/></td></tr>
<tr class="separator:a4b0b519936819c0b422e6938a779efd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e980bbaeb04990c34e7d831c3dbc9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#a06e980bbaeb04990c34e7d831c3dbc9c">ReadClock</a> = 0</td></tr>
<tr class="memdesc:a06e980bbaeb04990c34e7d831c3dbc9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index into TMsecClock of the value to be read.  <a href="#a06e980bbaeb04990c34e7d831c3dbc9c">More...</a><br/></td></tr>
<tr class="separator:a06e980bbaeb04990c34e7d831c3dbc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8496433d9b837a27d49b1505492c93f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structpc104sg__board.html">pc104sg_board</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a></td></tr>
<tr class="separator:aa8496433d9b837a27d49b1505492c93f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa325a9d2d9591f46ecf9a5784b58c58"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#afa325a9d2d9591f46ecf9a5784b58c58">StaticYear</a></td></tr>
<tr class="memdesc:afa325a9d2d9591f46ecf9a5784b58c58"><td class="mdescLeft">&#160;</td><td class="mdescRight">The year field in the pc104sg time registers ranges from 0-99, so we keep track of the century.  <a href="#afa325a9d2d9591f46ecf9a5784b58c58">More...</a><br/></td></tr>
<tr class="separator:afa325a9d2d9591f46ecf9a5784b58c58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa722c328a9b59473e042cd5405be4cf3"><td class="memItemLeft" align="right" valign="top">static struct file_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pc104sg_8c.html#aa722c328a9b59473e042cd5405be4cf3">pc104sg_fops</a></td></tr>
<tr class="separator:aa722c328a9b59473e042cd5405be4cf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ac4ed04f9ee13a19c2059952f49eab3c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALLBACK_POOL_SIZE&#160;&#160;&#160;64   /* number of callbacks we can support */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="gpio__mm_8c.html#aced72f655e2289540a95229fb62a2500">init_gpio_timer()</a>, and <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ceda26a59b995f39bf22eb1061c781a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DIV</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">a, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">b&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((a) / (b) - ((a) % (b) &lt; 0))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4fa002f43cad7f1b55e3276268cd6ee7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERRUPT_RATE&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ab19a4696978f0dc2d6fce85aa05e0d60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTERRUPTS_PER_TASKLET&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>We schedule the bottom-half tasklet after every INTERRUPTS_PER_TASKLET interrupts. </p>

</div>
</div>
<a class="anchor" id="afda1e5af1f15169b7b5d79a287c40b51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRQF_SHARED&#160;&#160;&#160;SA_SHIRQ</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a08e34981bd911e8f61169bae496fdb14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEAPS_THRU_END_OF</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">y</td><td>)</td>
          <td>&#160;&#160;&#160;(<a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 4) - <a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 100) + <a class="el" href="pc104sg_8c.html#a5ceda26a59b995f39bf22eb1061c781a">DIV</a> (y, 400))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40">irigTotimespec()</a>, <a class="el" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d">irigTotimeval32()</a>, and <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>.</p>

</div>
</div>
<a class="anchor" id="af9a70e38dd38b1feafb4c4d80f9ce9f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_TASKLET_COUNTER&#160;&#160;&#160;(10 * <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a> * <a class="el" href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">INTERRUPTS_PER_TASKLET</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow for counting up to 10 seconds, so that we can do 0.1hz callbacks. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, and <a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1352c42f114da199bdc91b99741b662"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_TMSEC_SINCE_LAST_SYNC&#160;&#160;&#160;(5 * <a class="el" href="time__constants_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Values that are used to detect whether the bottom half tasklet has gotten out of sync with real-time. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>.</p>

</div>
</div>
<a class="anchor" id="aeedd690418e2b6c159ce4f34cca764cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MSEC_PER_INTERRUPT&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#ad75544a73dfad2046264f3d8fc9d16e1">MSECS_PER_SEC</a> / <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of milliseconds per interrupt </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a143d71d2bd0e85875e088abed08a67d9">get_msec_clock_resolution()</a>.</p>

</div>
</div>
<a class="anchor" id="a6703e9797b10e29b0d263aeb823ef076"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define my_isleap</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">year</td><td>)</td>
          <td>&#160;&#160;&#160;((year) % 4 == 0 &amp;&amp; ((year) % 100 != 0 || (year) % 400 == 0))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>.</p>

</div>
</div>
<a class="anchor" id="ad20ced3a753aa389e1cb55775649c329"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PC104SG_SAMPLE_QUEUE_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Length of the circular buffer of output samples. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>, and <a class="el" href="pc104sg_8c.html#a18bccf2dde74934c01bb1fdeccfedec1">pc104sg_open()</a>.</p>

</div>
</div>
<a class="anchor" id="aebf73c633424be27d6f3860ff8174e07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REPO_REVISION&#160;&#160;&#160;&quot;unknown&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="ae6bc10904b2b09a717f1fb81cce017de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SECS_PER_DAY&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#a11528d10d5838afd2d0ec2f5841167cf">SECS_PER_HOUR</a> * 24)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="classnidas_1_1core_1_1SampleClock.html#aa1b2179a949d5bfe0d9f8ed4bc5ac10f">nidas::core::SampleClock::addSampleDate()</a>, <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, <a class="el" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40">irigTotimespec()</a>, <a class="el" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d">irigTotimeval32()</a>, <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>, <a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers()</a>, <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>, and <a class="el" href="classnidas_1_1dynld_1_1isff_1_1WisardMote.html#a46754e926e9a4610462908035c206441">nidas::dynld::isff::WisardMote::unpack10thSec()</a>.</p>

</div>
</div>
<a class="anchor" id="a11528d10d5838afd2d0ec2f5841167cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SECS_PER_HOUR&#160;&#160;&#160;(60 * 60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>macros borrowed from glibc/time functions </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b95bf012396b2bf9785b20bd7e17a6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMSEC_PER_INTERRUPT&#160;&#160;&#160;(<a class="el" href="time__constants_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a> / <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>number of 1/10ths of milliseconds per interrupt </p>

</div>
</div>
<a class="anchor" id="a8ecc3f5e4c4ea6dc0838decbae13effc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMSEC_PER_SOFT_TIC</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<a class="code" href="pc104sg_8c.html#a4b95bf012396b2bf9785b20bd7e17a6a">TMSEC_PER_INTERRUPT</a> *      <a class="code" href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">\</a></div>
<div class="line"><a class="code" href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">				 INTERRUPTS_PER_TASKLET</a>)</div>
<div class="ttc" id="pc104sg_8c_html_ab19a4696978f0dc2d6fce85aa05e0d60"><div class="ttname"><a href="pc104sg_8c.html#ab19a4696978f0dc2d6fce85aa05e0d60">INTERRUPTS_PER_TASKLET</a></div><div class="ttdeci">#define INTERRUPTS_PER_TASKLET</div><div class="ttdoc">We schedule the bottom-half tasklet after every INTERRUPTS_PER_TASKLET interrupts. </div><div class="ttdef"><b>Definition:</b> pc104sg.c:115</div></div>
<div class="ttc" id="pc104sg_8c_html_a4b95bf012396b2bf9785b20bd7e17a6a"><div class="ttname"><a href="pc104sg_8c.html#a4b95bf012396b2bf9785b20bd7e17a6a">TMSEC_PER_INTERRUPT</a></div><div class="ttdeci">#define TMSEC_PER_INTERRUPT</div><div class="ttdoc">number of 1/10ths of milliseconds per interrupt </div><div class="ttdef"><b>Definition:</b> pc104sg.c:109</div></div>
</div><!-- fragment -->
<p>Increment of the software clock on each schedule of the tasklet. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56">checkSoftTicker()</a>, <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, and <a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a20eeb1469b8898abac3c17173c078af4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4">clockAction</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>What to do with the with the software clock and loop counter in the bottom-half tasklet. </p>
<p>For USER_SET_REQUESTED, the software clock will be set once from a time provided by the user if the card does not have sync, and then adjusted from either the IRIG clock or unix clock. This is not currently used.</p>
<p>If USER_OVERRIDE_REQUESTED the software clock will be set once from a time provided by the user in an ioctl and not thereafter adjusted. USER_OVERRIDE_REQUESTED is not currently used and could probably be removed. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6"></a>RESET_COUNTERS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a20eeb1469b8898abac3c17173c078af4a1118121b5aa260fdb822fe11dd34c6cd"></a>NO_ACTION</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a65c98d2b2bce9d94da28a7ffcb6d25a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4">clockState</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enumeration of the state of the software clock. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a65c98d2b2bce9d94da28a7ffcb6d25a4ad20e90f7b92275771bfc864f966ef534"></a>SYNCD_SET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb"></a>UNSYNCD_SET</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a class="anchor" id="a490c7f4a4bd6529df1faad64b79ab87b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87b">notifyClients</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether to notify callback clients if clockAction is RESET_COUNTERS. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a490c7f4a4bd6529df1faad64b79ab87baa8904950cd23bfd9dfdf2aed277c0bbb"></a>NO_NOTIFY</em>&nbsp;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a490c7f4a4bd6529df1faad64b79ab87ba3b123b0d98b12bf2f2cb047e9d70a197"></a>NOTIFY_CLIENTS</em>&nbsp;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aaa653a40c114547800a6bf381440cb56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void checkSoftTicker </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>currClock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>notify</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to determine if our software clock and client callbacks are keeping up with real-time. </p>
<p>Other pc104 cards are receiving clock signals from this pc104sg card. If they want to do polling, or other periodic things, they register with this module for their callbacks to be called at a given rate by the 100Hz tasklet. We want to avoid missing a callback if at all possible.</p>
<p>It seems to happen, especially on vulcans, that a CPU card can miss one or more IRIG interrupts. When that happens, then one or more schedules of the bottom half tasklet are missed, which means that the software clock and the callbacks get behind.</p>
<p>This function compares the difference between the newClock value which was calculated from either the irig or unix clock, and currClock, which is the current software clock we provide to other modules. The difference is calculated as a number of 0.01 second delta-Ts.</p>
<p>This dT check is performed once a second.</p>
<p>If the clock difference is within limits of (IRIG_MAX_DT_DIFF / scale : IRIG_MIN_DT_DIFF / scale) then the pendingH100Hz counter is adjusted by the difference, so that the tasklet will be either scheduled more or less rapidly than 100 Hz for a period.</p>
<p>If the difference is negative, it is likely that a previous positive result was in error, or that spurious interrupts occurred. The latter doesn't seem to happen.</p>
<p>The hope is that in either case the software clock and callback loop counter get back in sync with the clock signals that were sent from the IRIG card to the other cards.</p>
<p>If the difference is outside those limits, then set clockAction is set to RESET_COUNTERS, so that the tasklet will reset the loop counter and the software clock the next time it is scheduled, and also call the resync callbacks of the clients, so that they could possibly resync their processing.</p>
<p>If the out-of-sync condition is caused by missed interrupts, or a temporary glitch in the irig clock, where it later recovers to be in sync with the output signals, this method should fix the problem.</p>
<p>Since we don't have any other details about the clock signals that were sent to other cards, we only have the value of the irig clock and unix clock to try to re-synchronize.</p>
<p>Another side issue arises when we are running without an IRIG source. This should only happen when bench testing. The pc104sg card still generates signals and interrupts, but they are based on an internal oscillator, which slowly drifts relative to the unix clock. In that case is is harder to determine what to do if a disagreement dTs is seen. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a51f25498514ec0895cd6d3dbcd962a9b">pc104sg_board::clockAction</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5">clockStateString()</a>, <a class="el" href="structpc104sg__board.html#a8c8c49fec99657a904d9517ef225b987">pc104sg_board::deviceName</a>, <a class="el" href="irigclock_8h.html#a4fdad41004626d0ac3348ba5718a37b3">IRIG_MAX_DT_DIFF</a>, <a class="el" href="irigclock_8h.html#a3816db7fa39d09eab3d0a7935e1c8c11">IRIG_MIN_DT_DIFF</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="structpc104sg__board.html#a289d78c106aa1025cbbbe7cd80d515f5">pc104sg_board::ndtLast</a>, <a class="el" href="structpc104sg__board.html#a18984b41f8278596aa812f1e98dc858b">pc104sg_board::ndtNSecs</a>, <a class="el" href="structpc104sg__board.html#a54f8690eeb825494a148af112cd3b8e5">pc104sg_board::pending100Hz</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="structpc104sg__status.html#a76eb0035da7be627e53fd2ac03d58928">pc104sg_status::slews</a>, <a class="el" href="structpc104sg__status.html#a12b7549c34ece1549edd9a7dfa139c6a">pc104sg_status::softwareClockResets</a>, <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>, <a class="el" href="pc104sg_8c.html#a8ecc3f5e4c4ea6dc0838decbae13effc">TMSEC_PER_SOFT_TIC</a>, and <a class="el" href="types_8h.html#a3f094c03554d08ebe28d4f7b2ed9acd8">TMSECS_PER_DAY</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_aaa653a40c114547800a6bf381440cb56_cgraph.png" border="0" usemap="#pc104sg_8c_aaa653a40c114547800a6bf381440cb56_cgraph" alt=""/></div>
<map name="pc104sg_8c_aaa653a40c114547800a6bf381440cb56_cgraph" id="pc104sg_8c_aaa653a40c114547800a6bf381440cb56_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5" title="clockStateString" alt="" coords="177,5,303,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a011f0657825d40831b8eac637e2bcea5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* clockStateString </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4ad20e90f7b92275771bfc864f966ef534">SYNCD_SET</a>, and <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb">UNSYNCD_SET</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56">checkSoftTicker()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d2c89e71466805c8f6a69ab85d6a75d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int counterRejam </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a5d2c89e71466805c8f6a69ab85d6a75d_cgraph.png" border="0" usemap="#pc104sg_8c_a5d2c89e71466805c8f6a69ab85d6a75d_cgraph" alt=""/></div>
<map name="pc104sg_8c_a5d2c89e71466805c8f6a69ab85d6a75d_cgraph" id="pc104sg_8c_a5d2c89e71466805c8f6a69ab85d6a75d_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="166,5,263,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac928e2ad48c95a94c86aa08962f32410"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void disableAllInts </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable external time tag interrupt. </p>
<p>These are caused by a TTL input on a pin, and allows one to tag external events. This may be useful for synchronization tests of DSMs. Disable external time tag interrupt. </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="structpc104sg__board.html#a36693aff3845eeafda21b00af0e62ca1">pc104sg_board::IntMask</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup()</a>, and <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a5171347c11b66993adf4d8d37915a9cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void do_gettimeofday_tv32 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimeval32.html">timeval32</a> *&#160;</td>
          <td class="paramname"><em>tv32</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, and <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>.</p>

</div>
</div>
<a class="anchor" id="aa73b925b4cef457efc768966179f095b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void doCallbacklist </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke the callback functions for a given rate. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a8a4850ed44faac062ac9e2a3a8eaf7a3">pc104sg_board::CallbackLists</a>, and <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>.</p>

</div>
</div>
<a class="anchor" id="a44ac6443e8cb3692ba6fe664d1307d9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void doResyncCallbacks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoke all resync callback functions. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a8a4850ed44faac062ac9e2a3a8eaf7a3">pc104sg_board::CallbackLists</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ad522600fb5cdf6e5db7e7cfe975c0a57">IRIG_NUM_RATES</a>, and <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>.</p>

</div>
</div>
<a class="anchor" id="a274ddac1815204b14f718e7de3dbefb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void enableHeartBeatInt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable heart beat interrupts. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a36693aff3845eeafda21b00af0e62ca1">pc104sg_board::IntMask</a>, and <a class="el" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801">resetHeartBeatLatch()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a274ddac1815204b14f718e7de3dbefb8_cgraph.png" border="0" usemap="#pc104sg_8c_a274ddac1815204b14f718e7de3dbefb8_cgraph" alt=""/></div>
<map name="pc104sg_8c_a274ddac1815204b14f718e7de3dbefb8_cgraph" id="pc104sg_8c_a274ddac1815204b14f718e7de3dbefb8_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801" title="After receiving a heartbeat interrupt, one must reset the heartbeat latch in the handler. " alt="" coords="201,5,357,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77f4885517c64c15fa1e084d892154f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#a4b0b519936819c0b422e6938a779efd6">TMsecClock</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a75c74ae09d9fbe3745d49328fe46fb09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#a06e980bbaeb04990c34e7d831c3dbc9c">ReadClock</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0c07adedda372e0c5a4a23c9d67376a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab">register_irig_callback</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6c39ec37091e0992b2eefdcf7cd91ab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af">unregister_irig_callback</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a24ae99999125029c7777df9840b0ec8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#aaf72cc4ce7d06abb88b67911ad702f9d">flush_irig_callbacks</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaf72cc4ce7d06abb88b67911ad702f9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int flush_irig_callbacks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#ae2ca47943771a3bca1cf8865b1a3cc06">pc104sg_board::callbackWaitQ</a>, and <a class="el" href="structpc104sg__board.html#a11df66727c4ce48f19bc76213bc85535">pc104sg_board::nPendingCallbackChanges</a>.</p>

<p>Referenced by <a class="el" href="main_8c.html#a2ba2c64b70757fd2e3de7b82ce7a97c4">arinc_cleanup()</a>, <a class="el" href="main_8c.html#a7dfb98de15331c96a44dcdb808855106">arinc_release()</a>, <a class="el" href="mesa_8c.html#a876a3144a3c4e936e4b9b55ee5f5f436">close_ports()</a>, <a class="el" href="ncar__a2d_8c.html#a6828b96eaf1d6bad3a9ceea17c949bf4">ncar_a2d_cleanup()</a>, <a class="el" href="ncar__a2d_8c.html#a38cffd6b64aa5ab64a54870a9e252935">resetBoard()</a>, and <a class="el" href="ncar__a2d_8c.html#ac621d95948eff6a7ee50914e9eac8159">stopBoard()</a>.</p>

</div>
</div>
<a class="anchor" id="a4a6e50ded9d3f5c70e8bd2b7409b5370"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void free_callbacks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleanup function that un-registers all callbacks. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a8a4850ed44faac062ac9e2a3a8eaf7a3">pc104sg_board::CallbackLists</a>, <a class="el" href="structpc104sg__board.html#acd16da4975bad8ca6107e41700de471e">pc104sg_board::CallbackPool</a>, <a class="el" href="structpc104sg__board.html#a7fdfe2cb60cb85d4c8d0132f3a8fc595">pc104sg_board::cblist_lock</a>, <a class="el" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580">handlePendingCallbacks()</a>, and <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ad522600fb5cdf6e5db7e7cfe975c0a57">IRIG_NUM_RATES</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a4a6e50ded9d3f5c70e8bd2b7409b5370_cgraph.png" border="0" usemap="#pc104sg_8c_a4a6e50ded9d3f5c70e8bd2b7409b5370_cgraph" alt=""/></div>
<map name="pc104sg_8c_a4a6e50ded9d3f5c70e8bd2b7409b5370_cgraph" id="pc104sg_8c_a4a6e50ded9d3f5c70e8bd2b7409b5370_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580" title="Handle pending adds and removes of callbacks from the active list for the appropriate rate..." alt="" coords="165,5,341,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abdb74e80c66172da496b8908c84ab2b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void get_irig_time </td>
          <td>(</td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get main clock. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b">getTimeFields()</a>, <a class="el" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40">irigTotimespec()</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="time__constants_8h.html#a6f0d36daae94b2c197a7043679b21d4d">NSECS_PER_TMSEC</a>, <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>, and <a class="el" href="types_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7">get_irig_time_tv32()</a>, <a class="el" href="pc104sg_8c.html#af1a9975a8b7e0f46a701e359b0e7e4aa">irig_clock_gettime()</a>, and <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_abdb74e80c66172da496b8908c84ab2b8_cgraph.png" border="0" usemap="#pc104sg_8c_abdb74e80c66172da496b8908c84ab2b8_cgraph" alt=""/></div>
<map name="pc104sg_8c_abdb74e80c66172da496b8908c84ab2b8_cgraph" id="pc104sg_8c_abdb74e80c66172da496b8908c84ab2b8_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="163,5,272,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="161,56,274,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7d31718700b10da9a5ca0032e15dd1d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void get_irig_time_tv32 </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimeval32.html">timeval32</a> *&#160;</td>
          <td class="paramname"><em>tv32</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, and <a class="el" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d">irigTotimeval32()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>, and <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a7d31718700b10da9a5ca0032e15dd1d7_cgraph.png" border="0" usemap="#pc104sg_8c_a7d31718700b10da9a5ca0032e15dd1d7_cgraph" alt=""/></div>
<map name="pc104sg_8c_a7d31718700b10da9a5ca0032e15dd1d7_cgraph" id="pc104sg_8c_a7d31718700b10da9a5ca0032e15dd1d7_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8" title="Get main clock. " alt="" coords="201,31,306,57"/><area shape="rect" id="node5" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d" title="Convert a struct irigTime into a struct timeval32. " alt="" coords="195,81,312,108"/><area shape="rect" id="node3" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="363,5,472,32"/><area shape="rect" id="node4" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="361,56,474,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a143d71d2bd0e85875e088abed08a67d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_msec_clock_resolution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aeedd690418e2b6c159ce4f34cca764cc">MSEC_PER_INTERRUPT</a>.</p>

</div>
</div>
<a class="anchor" id="aa9376577710fef9a923b2bfcb8cf7bc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getRequestedDPRAM </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, and <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468">requestExtendedStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="ab63a2129e5c40030d8a7455b9f38674b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void getTimeFields </td>
          <td>(</td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read time from the registers. </p>
<p>Set offset to 0 to read main clock. Set offset to 0x10 to read time of external pulse.</p>
<p>Data are stored in BCD form as 4 byte niblets, containing ones, tens or hundreds value for the respective time fields.</p>
<p>Called by: get_irig_time(&amp;ti); ISR ioctl user space <a class="el" href="pc104sg_8c.html#af1a9975a8b7e0f46a701e359b0e7e4aa" title="This function is available for use by external modules. ">irig_clock_gettime(struct timespec* tp)</a> other modules</p>
<p>Since reading the Usec1_Nsec100 value latches the other digits, all these calls hold a spin_lock before calling <a class="el" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. ">getTimeFields()</a>. </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, and <a class="el" href="pc104sg_8c.html#afa325a9d2d9591f46ecf9a5784b58c58">StaticYear</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>.</p>

</div>
</div>
<a class="anchor" id="aad3c2e372d016be6dd82b8dd834f1ee8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int getTimeUsec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read sub-second time fields from the card, return microseconds. </p>
<p>May be useful for watching-the-clock when debugging. </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="types_8h.html#abbd854badeea4209d9b62209833ca7a8">USECS_PER_MSEC</a>.</p>

</div>
</div>
<a class="anchor" id="a0d33fce3e2b16674e7015304617be580"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handlePendingCallbacks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle pending adds and removes of callbacks from the active list for the appropriate rate. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a8a4850ed44faac062ac9e2a3a8eaf7a3">pc104sg_board::CallbackLists</a>, <a class="el" href="structpc104sg__board.html#acd16da4975bad8ca6107e41700de471e">pc104sg_board::CallbackPool</a>, <a class="el" href="structpc104sg__board.html#ae2ca47943771a3bca1cf8865b1a3cc06">pc104sg_board::callbackWaitQ</a>, <a class="el" href="structpc104sg__board.html#a11df66727c4ce48f19bc76213bc85535">pc104sg_board::nPendingCallbackChanges</a>, <a class="el" href="structpc104sg__board.html#a5f8087bda8ef7f15c0dc80f34ab8cb7d">pc104sg_board::nPendingRemoves</a>, <a class="el" href="structpc104sg__board.html#aebfb6bc4e8a614d57d30f5eb2967fce5">pc104sg_board::pendingAdds</a>, and <a class="el" href="structpc104sg__board.html#aa78277868aeec90a5f8e7cd1acec8e84">pc104sg_board::pendingRemoves</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370">free_callbacks()</a>, and <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>.</p>

</div>
</div>
<a class="anchor" id="af1a9975a8b7e0f46a701e359b0e7e4aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void irig_clock_gettime </td>
          <td>(</td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>tp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is available for use by external modules. </p>
<p>Note that it disables interrupts. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, <a class="el" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40">irigTotimespec()</a>, and <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_af1a9975a8b7e0f46a701e359b0e7e4aa_cgraph.png" border="0" usemap="#pc104sg_8c_af1a9975a8b7e0f46a701e359b0e7e4aa_cgraph" alt=""/></div>
<map name="pc104sg_8c_af1a9975a8b7e0f46a701e359b0e7e4aa_cgraph" id="pc104sg_8c_af1a9975a8b7e0f46a701e359b0e7e4aa_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8" title="Get main clock. " alt="" coords="193,5,298,32"/><area shape="rect" id="node4" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="347,56,461,83"/><area shape="rect" id="node3" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="349,5,459,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98e0bc7ad9fa3c2e4fed4581b87ece40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void irigTotimespec </td>
          <td>(</td>
          <td class="paramtype">const struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timespec *&#160;</td>
          <td class="paramname"><em>ts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a struct irigTime into a struct timespec. </p>

<p>References <a class="el" href="pc104sg_8c.html#a08e34981bd911e8f61169bae496fdb14">LEAPS_THRU_END_OF</a>, <a class="el" href="types_8h.html#a27003ea6e0fb031d8d5fca97e29d1bc4">NSECS_PER_MSEC</a>, <a class="el" href="types_8h.html#a58f65626d5459f04fd48b81fd5315180">NSECS_PER_USEC</a>, and <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, and <a class="el" href="pc104sg_8c.html#af1a9975a8b7e0f46a701e359b0e7e4aa">irig_clock_gettime()</a>.</p>

</div>
</div>
<a class="anchor" id="a38b43c62a116640469a2281a5cda4d3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void irigTotimeval32 </td>
          <td>(</td>
          <td class="paramtype">const struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtimeval32.html">timeval32</a> *&#160;</td>
          <td class="paramname"><em>tv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a struct irigTime into a struct <a class="el" href="structtimeval32.html">timeval32</a>. </p>

<p>References <a class="el" href="pc104sg_8c.html#a08e34981bd911e8f61169bae496fdb14">LEAPS_THRU_END_OF</a>, <a class="el" href="types_8h.html#a58f65626d5459f04fd48b81fd5315180">NSECS_PER_USEC</a>, <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>, <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>, <a class="el" href="types_8h.html#abbd854badeea4209d9b62209833ca7a8">USECS_PER_MSEC</a>, and <a class="el" href="ublox_8cc.html#aaf33bd56da23b7654f654d201272537e">USECS_PER_SEC</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7">get_irig_time_tv32()</a>, and <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a7cc4f1611721a60ee94d83fced443472"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_AUTHOR </td>
          <td>(</td>
          <td class="paramtype">&quot;Gordon Maclean &lt;maclean@ucar.edu&gt;&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a529dabdfb5c57007d85baa777f46ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_DESCRIPTION </td>
          <td>(</td>
          <td class="paramtype">&quot;PC104-SG IRIG Card Driver&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a335c0dfb13b31018fd3660334e995bd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_exit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa58cb3ef53fe6d02b9324889d0a049ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad94b36675e7eb067ea3ce6ff9e244a44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_LICENSE </td>
          <td>(</td>
          <td class="paramtype">&quot;GPL&quot;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5622c8fa39fbe2ad8fb384dcf304d368"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#a0948792bb02e130a71d831c860899f32">Irq</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1556c77f5444fa8d3a58ccfd68b59ba2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ncar__a2d_8c.html#a95a394bee293020fb3d2ef208731bdf1">IoPort</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acea84885ad7871ade4f7cdf5a647620e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module_param </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pc104sg_8c.html#a8d6910fa51517497a3f2ba6b5d27d726">A2DClockFreq</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5254ca30e6e46bc7b28c17b101e23cd2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MODULE_VERSION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="viper__dio_8c.html#aebf73c633424be27d6f3860ff8174e07">REPO_REVISION</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a532b77817b333266c5de6eb671c7ea86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void oneHzFunction </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56">checkSoftTicker()</a>, <a class="el" href="pc104sg_8h.html#a2a24aae98df646ab3c9740755849cab8">CLOCK_STATUS_NOSYNC</a>, <a class="el" href="pc104sg_8h.html#a5f861c3a0e180ea6ceba66c53a5ee80c">CLOCK_SYNC_NOT_OK</a>, <a class="el" href="structclockSnapShot.html#a83ef430e424cc21785fd8270b62848ba">clockSnapShot::clock_time</a>, <a class="el" href="structpc104sg__board.html#a51f25498514ec0895cd6d3dbcd962a9b">pc104sg_board::clockAction</a>, <a class="el" href="structdsm__clock__data__2.html#a44dced09ccb7ddfe32e0db8888f9b49b">dsm_clock_data_2::clockAdjusts</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="structdsm__clock__sample__2.html#a751820e3b9d26c71b371ad73985a8e33">dsm_clock_sample_2::data</a>, <a class="el" href="structpc104sg__board.html#af1b577802e78d4d6b30607db33e91bda">pc104sg_board::dev</a>, <a class="el" href="structpc104sg__board.html#a00ddf517b31315c3c30649f4a64f1a41">pc104sg_board::dev_lock</a>, <a class="el" href="structpc104sg__board.html#a8c8c49fec99657a904d9517ef225b987">pc104sg_board::deviceName</a>, <a class="el" href="structpc104sg__board.html#a3927c1002e1395e606555b8d91d1b599">pc104sg_board::doSnapShot</a>, <a class="el" href="structclockSnapShot.html#aa91483777505828a9755239c300484d3">clockSnapShot::irig_time</a>, <a class="el" href="structdsm__clock__data__2.html#ae75a105e07988f9d14c80ff1a8983628">dsm_clock_data_2::irigt</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="structpc104sg__board.html#aa8e5a0fd5f16ee3b0d60c033e17843cc">pc104sg_board::lastSyncTime</a>, <a class="el" href="structdsm__clock__sample__2.html#ac0a768a8a9c94e16817cd1c691d02444">dsm_clock_sample_2::length</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="structdsm__clock__data__2.html#a43f11191ed08859e6e9c94d8569c66c4">dsm_clock_data_2::max100HzBacklog</a>, <a class="el" href="structpc104sg__board.html#ab9f02d70aec6559b868a81e0b9df6ac9">pc104sg_board::max100HzBacklog</a>, <a class="el" href="pc104sg_8c.html#ad1352c42f114da199bdc91b99741b662">MAX_TMSEC_SINCE_LAST_SYNC</a>, <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87baa8904950cd23bfd9dfdf2aed277c0bbb">NO_NOTIFY</a>, <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87ba3b123b0d98b12bf2f2cb047e9d70a197">NOTIFY_CLIENTS</a>, <a class="el" href="structpc104sg__board.html#a07d77a74c667402304d9cbfe43589977">pc104sg_board::notifyClients</a>, <a class="el" href="pc104sg_8c.html#ad20ced3a753aa389e1cb55775649c329">PC104SG_SAMPLE_QUEUE_SIZE</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="structirig__device.html#a7636b319dc41f6ea3445c142c1b3475f">irig_device::rwaitq</a>, <a class="el" href="structirig__device.html#a5003cdc1a2b18fb2c49d550d992304e4">irig_device::samples</a>, <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>, <a class="el" href="structdsm__clock__data__2.html#a796467b51b34c5216f06b46fc7703818">dsm_clock_data_2::seqnum</a>, <a class="el" href="structirig__device.html#a275007f4621f8c959cda103fa9b28084">irig_device::seqnum</a>, <a class="el" href="structirig__device.html#afa5d4455895774bc262341aab1692dd2">irig_device::skippedSamples</a>, <a class="el" href="structpc104sg__board.html#a3366b2e1a1c28ee2c4f95bf17832331c">pc104sg_board::snapshot</a>, <a class="el" href="structpc104sg__status.html#a12b7549c34ece1549edd9a7dfa139c6a">pc104sg_status::softwareClockResets</a>, <a class="el" href="structdsm__clock__data__2.html#ade89e989edec12e77c3db52fe7583e17">dsm_clock_data_2::status</a>, <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>, <a class="el" href="structclockSnapShot.html#a0cdb911bc1b2acd89d0bab022d1ad3ba">clockSnapShot::statusOR</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4ad20e90f7b92275771bfc864f966ef534">SYNCD_SET</a>, <a class="el" href="structdsm__clock__data__2.html#ad092a1f42f1ee03db8a9367c27e4adf0">dsm_clock_data_2::syncToggles</a>, <a class="el" href="structpc104sg__status.html#a3dc949e729a88ce83dca3ec70edb5b06">pc104sg_status::syncToggles</a>, <a class="el" href="structdsm__clock__sample__2.html#a59350f793cf8c5803264c57ae93cbf11">dsm_clock_sample_2::timetag</a>, <a class="el" href="types_8h.html#a3f094c03554d08ebe28d4f7b2ed9acd8">TMSECS_PER_DAY</a>, <a class="el" href="types_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a>, <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>, <a class="el" href="structclockSnapShot.html#a232f0ae413ed59a817336de2c4c9557f">clockSnapShot::unix_time</a>, <a class="el" href="structdsm__clock__data__2.html#a69bfc9ab7456495b600c37b9b84c62b9">dsm_clock_data_2::unixt</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb">UNSYNCD_SET</a>, and <a class="el" href="types_8h.html#a6d73c358b9d88e4a29614a740af4617b">USECS_PER_TMSEC</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a532b77817b333266c5de6eb671c7ea86_cgraph.png" border="0" usemap="#pc104sg_8c_a532b77817b333266c5de6eb671c7ea86_cgraph" alt=""/></div>
<map name="pc104sg_8c_a532b77817b333266c5de6eb671c7ea86_cgraph" id="pc104sg_8c_a532b77817b333266c5de6eb671c7ea86_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56" title="Try to determine if our software clock and client callbacks are keeping up with real&#45;time. " alt="" coords="171,5,293,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5" title="clockStateString" alt="" coords="342,5,469,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aed23bdab82ef3a1206f5890b2c0d20ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pc104sg_bh_100Hz </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tasklet called 100 times/second in softare interrupt context. </p>
<p>This tasklet maintains the software clock and performs requested regular callbacks. </p>

<p>References <a class="el" href="structpc104sg__board.html#a4c2bc5e110905645e5ee12ab7c2459d4">pc104sg_board::askedSnapShot</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a7fdfe2cb60cb85d4c8d0132f3a8fc595">pc104sg_board::cblist_lock</a>, <a class="el" href="pc104sg_8h.html#a2a24aae98df646ab3c9740755849cab8">CLOCK_STATUS_NOSYNC</a>, <a class="el" href="pc104sg_8h.html#a5f861c3a0e180ea6ceba66c53a5ee80c">CLOCK_SYNC_NOT_OK</a>, <a class="el" href="structpc104sg__board.html#a51f25498514ec0895cd6d3dbcd962a9b">pc104sg_board::clockAction</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="structpc104sg__board.html#afbbdbaede6ff5b3061a4e7200348e441">pc104sg_board::count100Hz</a>, <a class="el" href="pc104sg_8c.html#aa73b925b4cef457efc768966179f095b">doCallbacklist()</a>, <a class="el" href="pc104sg_8c.html#a44ac6443e8cb3692ba6fe664d1307d9e">doResyncCallbacks()</a>, <a class="el" href="structpc104sg__board.html#a3927c1002e1395e606555b8d91d1b599">pc104sg_board::doSnapShot</a>, <a class="el" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580">handlePendingCallbacks()</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a380611f93b3e47f33d50435bae3d94c6">IRIG_0_1_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72aafacecb72f868da604e999da56981ae7">IRIG_100_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a0d742437c44953451cf78025a750029d">IRIG_10_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a0bc9c62e090aae08e5e1dd41ba4519ec">IRIG_1_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a6339f84a5302b1621b884f396cc9a475">IRIG_20_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a840fa5bcb64d15297cfc79cfff2df8bd">IRIG_25_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ab6685ba432b27851588e75ead22d5ed2">IRIG_2_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a56cf49e1928f206def0e3fa6acc6d3b1">IRIG_4_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a3a414f51f4439e3d6e9a74c744d90719">IRIG_50_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a88950623924d2702ca534cda13d9ef65">IRIG_5_HZ</a>, <a class="el" href="structclockSnapShot.html#aa91483777505828a9755239c300484d3">clockSnapShot::irig_time</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="structpc104sg__board.html#ab9f02d70aec6559b868a81e0b9df6ac9">pc104sg_board::max100HzBacklog</a>, <a class="el" href="pc104sg_8c.html#af9a70e38dd38b1feafb4c4d80f9ce9f0">MAX_TASKLET_COUNTER</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4a1118121b5aa260fdb822fe11dd34c6cd">NO_ACTION</a>, <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87baa8904950cd23bfd9dfdf2aed277c0bbb">NO_NOTIFY</a>, <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87ba3b123b0d98b12bf2f2cb047e9d70a197">NOTIFY_CLIENTS</a>, <a class="el" href="structpc104sg__board.html#a07d77a74c667402304d9cbfe43589977">pc104sg_board::notifyClients</a>, <a class="el" href="structpc104sg__board.html#a54f8690eeb825494a148af112cd3b8e5">pc104sg_board::pending100Hz</a>, <a class="el" href="pc104sg_8c.html#a06e980bbaeb04990c34e7d831c3dbc9c">ReadClock</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="structpc104sg__board.html#a47dfa15293369c125c1982e5a4f2cd03">pc104sg_board::resetSnapshot</a>, <a class="el" href="structpc104sg__board.html#a59bbbc758b1f95bf28803cb09c076a66">pc104sg_board::resetSnapshotDone</a>, <a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers()</a>, <a class="el" href="structclockSnapShot.html#a0cdb911bc1b2acd89d0bab022d1ad3ba">clockSnapShot::statusOR</a>, <a class="el" href="structpc104sg__board.html#ae8bc3de407a85acd81600a583d277baa">pc104sg_board::statusOR</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4ad20e90f7b92275771bfc864f966ef534">SYNCD_SET</a>, <a class="el" href="pc104sg_8c.html#a8ecc3f5e4c4ea6dc0838decbae13effc">TMSEC_PER_SOFT_TIC</a>, <a class="el" href="pc104sg_8c.html#a4b0b519936819c0b422e6938a779efd6">TMsecClock</a>, <a class="el" href="structpc104sg__board.html#a3acbf8f28a1878ba834fa7368a12ed9f">pc104sg_board::TMsecClockTicker</a>, <a class="el" href="types_8h.html#a3f094c03554d08ebe28d4f7b2ed9acd8">TMSECS_PER_DAY</a>, <a class="el" href="structclockSnapShot.html#a232f0ae413ed59a817336de2c4c9557f">clockSnapShot::unix_time</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb">UNSYNCD_SET</a>, and <a class="el" href="structpc104sg__board.html#a3bfba3e433200ffe89d4c751e90d2a91">pc104sg_board::WriteClock</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_aed23bdab82ef3a1206f5890b2c0d20ed_cgraph.png" border="0" usemap="#pc104sg_8c_aed23bdab82ef3a1206f5890b2c0d20ed_cgraph" alt=""/></div>
<map name="pc104sg_8c_aed23bdab82ef3a1206f5890b2c0d20ed_cgraph" id="pc104sg_8c_aed23bdab82ef3a1206f5890b2c0d20ed_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#aa73b925b4cef457efc768966179f095b" title="Invoke the callback functions for a given rate. " alt="" coords="233,5,343,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a44ac6443e8cb3692ba6fe664d1307d9e" title="Invoke all resync callback functions. " alt="" coords="217,56,359,83"/><area shape="rect" id="node4" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580" title="Handle pending adds and removes of callbacks from the active list for the appropriate rate..." alt="" coords="200,107,376,133"/><area shape="rect" id="node5" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8" title="Set the software clock and the tasklet loop counter based on a clock value in a timeval struct..." alt="" coords="232,157,344,184"/><area shape="rect" id="node6" href="sing_8cc.html#a7cd7c66065ead3daabafb674047c78a8" title="if" alt="" coords="425,157,463,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaab00cb0f54ed7cb6a67e20eab87281e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pc104sg_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#ab0d46ee1984d701cef33075de9e6a53e">pc104sg_board::class</a>, <a class="el" href="structpc104sg__board.html#a7a077211e862d394f822a1f06f18c10d">pc104sg_board::device</a>, <a class="el" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410">disableAllInts()</a>, <a class="el" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370">free_callbacks()</a>, <a class="el" href="structpc104sg__board.html#a662544f3acdcf35a16843deff72ec974">pc104sg_board::ioport</a>, <a class="el" href="structpc104sg__board.html#aa50a70c5c2b70b7b8a54e0789c543ed9">pc104sg_board::irq</a>, <a class="el" href="structpc104sg__board.html#a8e41ee8634edb4f67821c89d06fcbb21">pc104sg_board::oneHzCallback</a>, <a class="el" href="structpc104sg__board.html#a794e80025a3e64906d81ced9f331e7c5">pc104sg_board::pc104sg_cdev</a>, <a class="el" href="structpc104sg__board.html#a24d964c578d997d750ca590425595b95">pc104sg_board::pc104sg_device</a>, <a class="el" href="structpc104sg__board.html#a618aa12544cdabc76949a975d24d905c">pc104sg_board::tasklet100Hz</a>, and <a class="el" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af">unregister_irig_callback()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_aaab00cb0f54ed7cb6a67e20eab87281e_cgraph.png" border="0" usemap="#pc104sg_8c_aaab00cb0f54ed7cb6a67e20eab87281e_cgraph" alt=""/></div>
<map name="pc104sg_8c_aaab00cb0f54ed7cb6a67e20eab87281e_cgraph" id="pc104sg_8c_aaab00cb0f54ed7cb6a67e20eab87281e_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410" title="Enable external time tag interrupt. " alt="" coords="219,5,325,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370" title="Cleanup function that un&#45;registers all callbacks. " alt="" coords="216,56,328,83"/><area shape="rect" id="node5" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af" title="Modules call this function to dequeue their callbacks. " alt="" coords="187,107,357,133"/><area shape="rect" id="node4" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580" title="Handle pending adds and removes of callbacks from the active list for the appropriate rate..." alt="" coords="405,56,581,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc332f30a2b0de61fb66114ac2da63d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __init pc104sg_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#a8d6910fa51517497a3f2ba6b5d27d726">A2DClockFreq</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="pc104sg_8c.html#ac4ed04f9ee13a19c2059952f49eab3c6">CALLBACK_POOL_SIZE</a>, <a class="el" href="pc104sg_8c.html#a5d2c89e71466805c8f6a69ab85d6a75d">counterRejam()</a>, <a class="el" href="structpc104sg__board.html#a8c8c49fec99657a904d9517ef225b987">pc104sg_board::deviceName</a>, <a class="el" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410">disableAllInts()</a>, <a class="el" href="pc104sg_8c.html#a7629105fe7a35b297bd1df5304d2e4d7">driver_name</a>, <a class="el" href="pc104sg_8c.html#a274ddac1815204b14f718e7de3dbefb8">enableHeartBeatInt()</a>, <a class="el" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7">get_irig_time_tv32()</a>, <a class="el" href="pc104sg_8c.html#a4fa002f43cad7f1b55e3276268cd6ee7">INTERRUPT_RATE</a>, <a class="el" href="pc104sg_8c.html#a2bb8e7302c29c651ba6823416ca50a32">IoPort</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72a0bc9c62e090aae08e5e1dd41ba4519ec">IRIG_1_HZ</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ad522600fb5cdf6e5db7e7cfe975c0a57">IRIG_NUM_RATES</a>, <a class="el" href="pc104sg_8c.html#a0948792bb02e130a71d831c860899f32">Irq</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="ublox_8cc.html#ad75544a73dfad2046264f3d8fc9d16e1">MSECS_PER_SEC</a>, <a class="el" href="pc104sg_8c.html#a490c7f4a4bd6529df1faad64b79ab87baa8904950cd23bfd9dfdf2aed277c0bbb">NO_NOTIFY</a>, <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>, <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, <a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup()</a>, <a class="el" href="structpc104sg__board.html#a24d964c578d997d750ca590425595b95">pc104sg_board::pc104sg_device</a>, <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>, <a class="el" href="pc104sg_8c.html#a06e980bbaeb04990c34e7d831c3dbc9c">ReadClock</a>, <a class="el" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab">register_irig_callback()</a>, <a class="el" href="pc104sg_8c.html#aebf73c633424be27d6f3860ff8174e07">REPO_REVISION</a>, <a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb">requestDPRAM()</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput()</a>, <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime()</a>, <a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb">setPrimarySyncReference()</a>, <a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output()</a>, <a class="el" href="pc104sg_8c.html#a47acaa00ccc88f829fa6730daf6f17a1">setTimeCodeInputSelect()</a>, <a class="el" href="structpc104sg__board.html#a618aa12544cdabc76949a975d24d905c">pc104sg_board::tasklet100Hz</a>, <a class="el" href="pc104sg_8c.html#a42c439fe41aa10b813fb26efea64beab">timevalToirig()</a>, <a class="el" href="pc104sg_8c.html#a4b0b519936819c0b422e6938a779efd6">TMsecClock</a>, <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>, <a class="el" href="pc104sg_8c.html#a65c98d2b2bce9d94da28a7ffcb6d25a4acb0bff32a286aa05e9d0335664b059cb">UNSYNCD_SET</a>, and <a class="el" href="types_8h.html#abbd854badeea4209d9b62209833ca7a8">USECS_PER_MSEC</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_acc332f30a2b0de61fb66114ac2da63d9_cgraph.png" border="0" usemap="#pc104sg_8c_acc332f30a2b0de61fb66114ac2da63d9_cgraph" alt=""/></div>
<map name="pc104sg_8c_acc332f30a2b0de61fb66114ac2da63d9_cgraph" id="pc104sg_8c_acc332f30a2b0de61fb66114ac2da63d9_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a5d2c89e71466805c8f6a69ab85d6a75d" title="counterRejam" alt="" coords="195,68,306,95"/><area shape="rect" id="node4" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410" title="Enable external time tag interrupt. " alt="" coords="426,397,531,424"/><area shape="rect" id="node5" href="pc104sg_8c.html#a274ddac1815204b14f718e7de3dbefb8" title="Enable heart beat interrupts. " alt="" coords="177,701,324,728"/><area shape="rect" id="node7" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7" title="get_irig_time_tv32" alt="" coords="409,955,549,981"/><area shape="rect" id="node12" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86" title="oneHzFunction" alt="" coords="193,1005,309,1032"/><area shape="rect" id="node15" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed" title="Tasklet called 100 times/second in softare interrupt context. " alt="" coords="177,600,324,627"/><area shape="rect" id="node21" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e" title="pc104sg_cleanup" alt="" coords="184,487,317,513"/><area shape="rect" id="node24" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a" title="pc104sg_isr" alt="" coords="201,803,300,829"/><area shape="rect" id="node29" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab" title="Module function that allows other modules to register their callback function to be called at the giv..." alt="" coords="173,1056,328,1083"/><area shape="rect" id="node27" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb" title="The requestDPRAM()/getRequestedDPRAM() pair allow us to break a dual&#45;port read into two parts..." alt="" coords="643,853,759,880"/><area shape="rect" id="node30" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f" title="setHeartBeatOutput" alt="" coords="175,347,327,373"/><area shape="rect" id="node32" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374" title="The major time consists of the day&#45;of&#45;year, hour, minute and second fields. " alt="" coords="197,144,305,171"/><area shape="rect" id="node34" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb" title="Set the primary time reference. " alt="" coords="158,245,343,272"/><area shape="rect" id="node35" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb" title="setRate2Output" alt="" coords="189,296,312,323"/><area shape="rect" id="node36" href="pc104sg_8c.html#a47acaa00ccc88f829fa6730daf6f17a1" title="setTimeCodeInputSelect" alt="" coords="161,5,340,32"/><area shape="rect" id="node37" href="pc104sg_8c.html#a42c439fe41aa10b813fb26efea64beab" title="timevalToirig" alt="" coords="200,1107,301,1133"/><area shape="rect" id="node3" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="653,144,750,171"/><area shape="rect" id="node6" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801" title="After receiving a heartbeat interrupt, one must reset the heartbeat latch in the handler. " alt="" coords="401,752,557,779"/><area shape="rect" id="node8" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8" title="Get main clock. " alt="" coords="649,904,754,931"/><area shape="rect" id="node11" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d" title="Convert a struct irigTime into a struct timeval32. " alt="" coords="643,955,760,981"/><area shape="rect" id="node9" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="840,879,949,905"/><area shape="rect" id="node10" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="838,929,951,956"/><area shape="rect" id="node13" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56" title="Try to determine if our software clock and client callbacks are keeping up with real&#45;time. " alt="" coords="417,1005,540,1032"/><area shape="rect" id="node14" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5" title="clockStateString" alt="" coords="638,1005,765,1032"/><area shape="rect" id="node16" href="pc104sg_8c.html#aa73b925b4cef457efc768966179f095b" title="Invoke the callback functions for a given rate. " alt="" coords="424,549,533,576"/><area shape="rect" id="node17" href="pc104sg_8c.html#a44ac6443e8cb3692ba6fe664d1307d9e" title="Invoke all resync callback functions. " alt="" coords="407,600,550,627"/><area shape="rect" id="node18" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580" title="Handle pending adds and removes of callbacks from the active list for the appropriate rate..." alt="" coords="613,575,789,601"/><area shape="rect" id="node19" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8" title="Set the software clock and the tasklet loop counter based on a clock value in a timeval struct..." alt="" coords="423,701,535,728"/><area shape="rect" id="node20" href="sing_8cc.html#a7cd7c66065ead3daabafb674047c78a8" title="if" alt="" coords="682,701,721,728"/><area shape="rect" id="node22" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370" title="Cleanup function that un&#45;registers all callbacks. " alt="" coords="423,499,535,525"/><area shape="rect" id="node23" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af" title="Modules call this function to dequeue their callbacks. " alt="" coords="393,448,564,475"/><area shape="rect" id="node25" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468" title="requestExtendedStatus" alt="" coords="392,803,565,829"/><area shape="rect" id="node28" href="pc104sg_8c.html#a5171347c11b66993adf4d8d37915a9cc" title="do_gettimeofday_tv32" alt="" coords="396,853,561,880"/><area shape="rect" id="node26" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8" title="getRequestedDPRAM" alt="" coords="624,803,779,829"/><area shape="rect" id="node31" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198" title="Read dual port RAM. " alt="" coords="431,296,527,323"/><area shape="rect" id="node33" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62" title="Get external event time. " alt="" coords="445,144,513,171"/><area shape="rect" id="node38" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb" title="Break a struct timeval32 into the fields of a struct irigTime. " alt="" coords="422,1107,535,1133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8c8b15054d75a173e58bc7f30a291cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static long pc104sg_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a51f25498514ec0895cd6d3dbcd962a9b">pc104sg_board::clockAction</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="structpc104sg__board.html#a8c8c49fec99657a904d9517ef225b987">pc104sg_board::deviceName</a>, <a class="el" href="structpc104sg__board.html#ac46f52683dc689ffb0747b69fd6cdd16">pc104sg_board::DP_RamExtStatusEnabled</a>, <a class="el" href="structpc104sg__board.html#ab7cdaf354d9c6d69c5b48b41da827af0">pc104sg_board::DP_RamExtStatusRequested</a>, <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, <a class="el" href="irigclock_8h.html#a23e9db41bcf40e169e523d06474a38d3">IRIG_GET_CLOCK</a>, <a class="el" href="irigclock_8h.html#af5f130cf99a045be57deee42395541f8">IRIG_GET_STATUS</a>, <a class="el" href="irigclock_8h.html#a81c045ee8d06970e2cdb12db0fb40d5a">IRIG_IOC_MAGIC</a>, <a class="el" href="irigclock_8h.html#a316cb34f849ac592468ae2d4c23c691e">IRIG_OVERRIDE_CLOCK</a>, <a class="el" href="irigclock_8h.html#a0fbaa5e1a5f864065e57aaa99f80b983">IRIG_SET_CLOCK</a>, <a class="el" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d">irigTotimeval32()</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="sing_8cc.html#afed088663f8704004425cdae2120b9b3">len</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime()</a>, <a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62">setYear()</a>, <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>, <a class="el" href="structpc104sg__status.html#a3c9dfc526b1e32a3be85d91ee768e101">pc104sg_status::statusOR</a>, and <a class="el" href="pc104sg_8c.html#a3721fb10b228d8970ff9ac1a8d5acef8">timeval32Toirig()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_ae8c8b15054d75a173e58bc7f30a291cd_cgraph.png" border="0" usemap="#pc104sg_8c_ae8c8b15054d75a173e58bc7f30a291cd_cgraph" alt=""/></div>
<map name="pc104sg_8c_ae8c8b15054d75a173e58bc7f30a291cd_cgraph" id="pc104sg_8c_ae8c8b15054d75a173e58bc7f30a291cd_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8" title="Get main clock. " alt="" coords="169,31,274,57"/><area shape="rect" id="node5" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d" title="Convert a struct irigTime into a struct timeval32. " alt="" coords="163,81,280,108"/><area shape="rect" id="node6" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374" title="The major time consists of the day&#45;of&#45;year, hour, minute and second fields. " alt="" coords="167,183,275,209"/><area shape="rect" id="node7" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62" title="Get external event time. " alt="" coords="351,132,419,159"/><area shape="rect" id="node9" href="pc104sg_8c.html#a3721fb10b228d8970ff9ac1a8d5acef8" title="timeval32Toirig" alt="" coords="163,233,280,260"/><area shape="rect" id="node3" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="331,5,440,32"/><area shape="rect" id="node4" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="329,56,442,83"/><area shape="rect" id="node8" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="491,157,589,184"/><area shape="rect" id="node10" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb" title="Break a struct timeval32 into the fields of a struct irigTime. " alt="" coords="329,233,442,260"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaf941eb0fe5482665c540a976d2b220a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static irqreturn_t pc104sg_isr </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>callbackPtr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="pc104sg_8h.html#a5f861c3a0e180ea6ceba66c53a5ee80c">CLOCK_SYNC_NOT_OK</a>, <a class="el" href="structclockSnapShot.html#a83ef430e424cc21785fd8270b62848ba">clockSnapShot::clock_time</a>, <a class="el" href="structpc104sg__board.html#a51f25498514ec0895cd6d3dbcd962a9b">pc104sg_board::clockAction</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="pc104sg_8c.html#a5171347c11b66993adf4d8d37915a9cc">do_gettimeofday_tv32()</a>, <a class="el" href="structpc104sg__board.html#a3927c1002e1395e606555b8d91d1b599">pc104sg_board::doSnapShot</a>, <a class="el" href="structpc104sg__board.html#a691e6dfd0eafdf6d134b045d1e273da1">pc104sg_board::extendedStatus</a>, <a class="el" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7">get_irig_time_tv32()</a>, <a class="el" href="structpc104sg__board.html#a36693aff3845eeafda21b00af0e62ca1">pc104sg_board::IntMask</a>, <a class="el" href="structclockSnapShot.html#aa91483777505828a9755239c300484d3">clockSnapShot::irig_time</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>, <a class="el" href="structpc104sg__board.html#a54f8690eeb825494a148af112cd3b8e5">pc104sg_board::pending100Hz</a>, <a class="el" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468">requestExtendedStatus()</a>, <a class="el" href="pc104sg_8c.html#a20eeb1469b8898abac3c17173c078af4abc947287da26ead3797842e0b6f70ec6">RESET_COUNTERS</a>, <a class="el" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801">resetHeartBeatLatch()</a>, <a class="el" href="structpc104sg__board.html#a47dfa15293369c125c1982e5a4f2cd03">pc104sg_board::resetSnapshot</a>, <a class="el" href="structpc104sg__board.html#a59bbbc758b1f95bf28803cb09c076a66">pc104sg_board::resetSnapshotDone</a>, <a class="el" href="structpc104sg__board.html#a3366b2e1a1c28ee2c4f95bf17832331c">pc104sg_board::snapshot</a>, <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>, <a class="el" href="structpc104sg__status.html#a3c9dfc526b1e32a3be85d91ee768e101">pc104sg_status::statusOR</a>, <a class="el" href="structclockSnapShot.html#a0cdb911bc1b2acd89d0bab022d1ad3ba">clockSnapShot::statusOR</a>, <a class="el" href="structpc104sg__board.html#ae8bc3de407a85acd81600a583d277baa">pc104sg_board::statusOR</a>, <a class="el" href="structpc104sg__status.html#a3dc949e729a88ce83dca3ec70edb5b06">pc104sg_status::syncToggles</a>, <a class="el" href="structpc104sg__board.html#a618aa12544cdabc76949a975d24d905c">pc104sg_board::tasklet100Hz</a>, <a class="el" href="structpc104sg__board.html#a3acbf8f28a1878ba834fa7368a12ed9f">pc104sg_board::TMsecClockTicker</a>, and <a class="el" href="structclockSnapShot.html#a232f0ae413ed59a817336de2c4c9557f">clockSnapShot::unix_time</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_aaf941eb0fe5482665c540a976d2b220a_cgraph.png" border="0" usemap="#pc104sg_8c_aaf941eb0fe5482665c540a976d2b220a_cgraph" alt=""/></div>
<map name="pc104sg_8c_aaf941eb0fe5482665c540a976d2b220a_cgraph" id="pc104sg_8c_aaf941eb0fe5482665c540a976d2b220a_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a5171347c11b66993adf4d8d37915a9cc" title="do_gettimeofday_tv32" alt="" coords="156,31,321,57"/><area shape="rect" id="node3" href="pc104sg_8c.html#a7d31718700b10da9a5ca0032e15dd1d7" title="get_irig_time_tv32" alt="" coords="169,81,309,108"/><area shape="rect" id="node8" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468" title="requestExtendedStatus" alt="" coords="152,132,325,159"/><area shape="rect" id="node11" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801" title="After receiving a heartbeat interrupt, one must reset the heartbeat latch in the handler. " alt="" coords="161,183,317,209"/><area shape="rect" id="node4" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8" title="Get main clock. " alt="" coords="398,31,503,57"/><area shape="rect" id="node7" href="pc104sg_8c.html#a38b43c62a116640469a2281a5cda4d3d" title="Convert a struct irigTime into a struct timeval32. " alt="" coords="392,81,509,108"/><area shape="rect" id="node5" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b" title="Read time from the registers. " alt="" coords="579,5,688,32"/><area shape="rect" id="node6" href="pc104sg_8c.html#a98e0bc7ad9fa3c2e4fed4581b87ece40" title="Convert a struct irigTime into a struct timespec. " alt="" coords="577,56,690,83"/><area shape="rect" id="node9" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8" title="getRequestedDPRAM" alt="" coords="373,132,528,159"/><area shape="rect" id="node10" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb" title="The requestDPRAM()/getRequestedDPRAM() pair allow us to break a dual&#45;port read into two parts..." alt="" coords="393,183,509,209"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a18bccf2dde74934c01bb1fdeccfedec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pc104sg_open </td>
          <td>(</td>
          <td class="paramtype">struct inode *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#af1b577802e78d4d6b30607db33e91bda">pc104sg_board::dev</a>, <a class="el" href="structpc104sg__board.html#a00ddf517b31315c3c30649f4a64f1a41">pc104sg_board::dev_lock</a>, <a class="el" href="structpc104sg__board.html#ae9b6a004a73f9b0fd545fb6876d7ae53">pc104sg_board::num_opened</a>, <a class="el" href="pc104sg_8c.html#ad20ced3a753aa389e1cb55775649c329">PC104SG_SAMPLE_QUEUE_SIZE</a>, <a class="el" href="nidas__util_8c.html#ab21a87a4d11fcab518965b8ac4f2eda4">realloc_dsm_circ_buf()</a>, <a class="el" href="structirig__device.html#a7636b319dc41f6ea3445c142c1b3475f">irig_device::rwaitq</a>, <a class="el" href="structirig__device.html#a5003cdc1a2b18fb2c49d550d992304e4">irig_device::samples</a>, <a class="el" href="structpc104sg__status.html#a12b7549c34ece1549edd9a7dfa139c6a">pc104sg_status::softwareClockResets</a>, and <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a18bccf2dde74934c01bb1fdeccfedec1_cgraph.png" border="0" usemap="#pc104sg_8c_a18bccf2dde74934c01bb1fdeccfedec1_cgraph" alt=""/></div>
<map name="pc104sg_8c_a18bccf2dde74934c01bb1fdeccfedec1_cgraph" id="pc104sg_8c_a18bccf2dde74934c01bb1fdeccfedec1_cgraph">
<area shape="rect" id="node2" href="nidas__util_8c.html#ab21a87a4d11fcab518965b8ac4f2eda4" title="realloc_dsm_circ_buf" alt="" coords="168,31,323,57"/><area shape="rect" id="node3" href="nidas__util_8c.html#a35b6ad4d4ef9f630b31570c9a20e6ee3" title="free_dsm_circ_buf" alt="" coords="373,5,512,32"/><area shape="rect" id="node4" href="nidas__util_8c.html#a300153253ae0c68c2c41206be69adb45" title="alloc_dsm_circ_buf" alt="" coords="371,56,514,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9d9bfcb1413f0ffd59dffaa449c06a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int pc104sg_poll </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">poll_table *&#160;</td>
          <td class="paramname"><em>wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="structirig__device.html#af0f532162721e2f9972e6b0662768040">irig_device::read_state</a>, <a class="el" href="structirig__device.html#a7636b319dc41f6ea3445c142c1b3475f">irig_device::rwaitq</a>, and <a class="el" href="structirig__device.html#a5003cdc1a2b18fb2c49d550d992304e4">irig_device::samples</a>.</p>

</div>
</div>
<a class="anchor" id="a5e3b129ef3a997869e581bdd3b3a247b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ssize_t pc104sg_read </td>
          <td>(</td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char __user *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">loff_t *&#160;</td>
          <td class="paramname"><em>f_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="nidas__util_8c.html#abd271331fc81c951fd4ff2ae4c359af9">nidas_circbuf_read()</a>, <a class="el" href="structirig__device.html#af0f532162721e2f9972e6b0662768040">irig_device::read_state</a>, <a class="el" href="structirig__device.html#a7636b319dc41f6ea3445c142c1b3475f">irig_device::rwaitq</a>, and <a class="el" href="structirig__device.html#a5003cdc1a2b18fb2c49d550d992304e4">irig_device::samples</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a5e3b129ef3a997869e581bdd3b3a247b_cgraph.png" border="0" usemap="#pc104sg_8c_a5e3b129ef3a997869e581bdd3b3a247b_cgraph" alt=""/></div>
<map name="pc104sg_8c_a5e3b129ef3a997869e581bdd3b3a247b_cgraph" id="pc104sg_8c_a5e3b129ef3a997869e581bdd3b3a247b_cgraph">
<area shape="rect" id="node2" href="nidas__util_8c.html#abd271331fc81c951fd4ff2ae4c359af9" title="nidas_circbuf_read" alt="" coords="165,12,307,39"/><area shape="rect" id="node3" href="nidas__util_8c.html#ace2c2b9441f0dafe89d3a00790b996ae" title="nidas_circbuf_read\l_nowait" alt="" coords="355,5,496,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae887d53a79983eaacf707bcb3abc2999"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pc104sg_release </td>
          <td>(</td>
          <td class="paramtype">struct inode *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct file *&#160;</td>
          <td class="paramname"><em>filp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#af1b577802e78d4d6b30607db33e91bda">pc104sg_board::dev</a>, <a class="el" href="structpc104sg__board.html#a00ddf517b31315c3c30649f4a64f1a41">pc104sg_board::dev_lock</a>, <a class="el" href="nidas__util_8c.html#a35b6ad4d4ef9f630b31570c9a20e6ee3">free_dsm_circ_buf()</a>, <a class="el" href="structpc104sg__board.html#ae9b6a004a73f9b0fd545fb6876d7ae53">pc104sg_board::num_opened</a>, and <a class="el" href="structirig__device.html#a5003cdc1a2b18fb2c49d550d992304e4">irig_device::samples</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_ae887d53a79983eaacf707bcb3abc2999_cgraph.png" border="0" usemap="#pc104sg_8c_ae887d53a79983eaacf707bcb3abc2999_cgraph" alt=""/></div>
<map name="pc104sg_8c_ae887d53a79983eaacf707bcb3abc2999_cgraph" id="pc104sg_8c_ae887d53a79983eaacf707bcb3abc2999_cgraph">
<area shape="rect" id="node2" href="nidas__util_8c.html#a35b6ad4d4ef9f630b31570c9a20e6ee3" title="free_dsm_circ_buf" alt="" coords="184,5,323,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1135b8eef3e16d1c2e3b2b26380e6198"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int readDPRAM </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read dual port RAM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>dual-port RAM address to read</td></tr>
  </table>
  </dd>
</dl>
<p>Called by (all by module init) <a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput(int rate)</a> <a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb" title="Set the primary time reference. ">setPrimarySyncReference(unsigned char val)</a> <a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output(int rate)</a> init </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput()</a>, <a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb">setPrimarySyncReference()</a>, and <a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output()</a>.</p>

</div>
</div>
<a class="anchor" id="a6be98cca820db8ed3d7b06aecfafc2ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct irig_callback* register_irig_callback </td>
          <td>(</td>
          <td class="paramtype">irig_callback_func *&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">irig_callback_func *&#160;</td>
          <td class="paramname"><em>resync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72">irigClockRates</a>&#160;</td>
          <td class="paramname"><em>rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>privateData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>errp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Module function that allows other modules to register their callback function to be called at the given rate. </p>
<p>register_irig_callback can be called at anytime. Note that register_irig_callback and unregister_irig_callback do not alter the active callback lists but instead add requests to a group of pending requests. The loop function, pc104sg_bh_100Hz, does not do any locking on the active list. Once on each pass through the loop it acts on the pending requests. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#acd16da4975bad8ca6107e41700de471e">pc104sg_board::CallbackPool</a>, <a class="el" href="structpc104sg__board.html#a7fdfe2cb60cb85d4c8d0132f3a8fc595">pc104sg_board::cblist_lock</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ad522600fb5cdf6e5db7e7cfe975c0a57">IRIG_NUM_RATES</a>, <a class="el" href="structpc104sg__board.html#a11df66727c4ce48f19bc76213bc85535">pc104sg_board::nPendingCallbackChanges</a>, <a class="el" href="structpc104sg__board.html#aebfb6bc4e8a614d57d30f5eb2967fce5">pc104sg_board::pendingAdds</a>, and <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>.</p>

<p>Referenced by <a class="el" href="main_8c.html#a8f5f104bbd83402fd37bb34156829eef">arinc_init()</a>, <a class="el" href="main_8c.html#a8e6a33a37ab469b217c5a995a2946dfa">arinc_ioctl()</a>, <a class="el" href="mesa_8c.html#a060aaeeada79906fd2a0363047d93f69">mesa_ioctl()</a>, <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>, <a class="el" href="ncar__a2d_8c.html#a38cffd6b64aa5ab64a54870a9e252935">resetBoard()</a>, and <a class="el" href="ncar__a2d_8c.html#a3a1c798bd42dc6d690c497e630584d9d">waitFor1PPS()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8f771cfe673267603932b907013adeb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void requestDPRAM </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb" title="The requestDPRAM()/getRequestedDPRAM() pair allow us to break a dual-port read into two parts...">requestDPRAM()</a>/getRequestedDPRAM() pair allow us to break a dual-port read into two parts. </p>
<p>This is used by the interrupt service routine. Each entry into the ISR reads the value ready from the previous request, then issues another request. In this way, the necessary delay between requesting dual-port RAM and actually getting the value happens between interrupts, rather than by a busy wait.</p>
<p>If non ISR code wants to access dual ported RAM, it should do the following, which prevents the ISR from accessing it, without disabling interrupts while accessing the DP ram: spin_lock_irqsave(&amp;board.lock, flags); board.DP_RamExtStatusEnabled = 0; board.DP_RamExtStatusRequested = 0; spin_unlock_irqrestore(&amp;board.lock, flags); Then access the RAM, for example: setYear(n); ... Then re-enable access by the ISR spin_lock_irqsave(&amp;board.lock, flags); board.DP_RamExtStatusEnabled = 1; spin_unlock_irqrestore(&amp;board.lock, flags); </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, and <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>, and <a class="el" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468">requestExtendedStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="aefe6cedb99237a8eda75efad5dfa4468"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void requestExtendedStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#ac46f52683dc689ffb0747b69fd6cdd16">pc104sg_board::DP_RamExtStatusEnabled</a>, <a class="el" href="structpc104sg__board.html#ab7cdaf354d9c6d69c5b48b41da827af0">pc104sg_board::DP_RamExtStatusRequested</a>, <a class="el" href="structpc104sg__board.html#a691e6dfd0eafdf6d134b045d1e273da1">pc104sg_board::extendedStatus</a>, <a class="el" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8">getRequestedDPRAM()</a>, and <a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb">requestDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_aefe6cedb99237a8eda75efad5dfa4468_cgraph.png" border="0" usemap="#pc104sg_8c_aefe6cedb99237a8eda75efad5dfa4468_cgraph" alt=""/></div>
<map name="pc104sg_8c_aefe6cedb99237a8eda75efad5dfa4468_cgraph" id="pc104sg_8c_aefe6cedb99237a8eda75efad5dfa4468_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8" title="getRequestedDPRAM" alt="" coords="227,5,381,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb" title="The requestDPRAM()/getRequestedDPRAM() pair allow us to break a dual&#45;port read into two parts..." alt="" coords="246,56,362,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a59be4e9f51e3e4c7cba41fd4244ab801"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void resetHeartBeatLatch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>After receiving a heartbeat interrupt, one must reset the heartbeat latch in the handler. </p>
<p>Otherwise either of two bad things will happen, depending on how the system is configured to handle interrupt levels:</p>
<ol type="1">
<li>the interrupt handler will be called again immediately after it returns, resulting in a system lockup.</li>
<li>you won't get any further interrupts. </li>
</ol>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="structpc104sg__board.html#a36693aff3845eeafda21b00af0e62ca1">pc104sg_board::IntMask</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a274ddac1815204b14f718e7de3dbefb8">enableHeartBeatInt()</a>, and <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>.</p>

</div>
</div>
<a class="anchor" id="a89efb62061998a5877220ef066f5578a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void resetMatchLatch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disable heart beat interrupts. </p>
<p>After receiving a match interrupt, one must reset the match flag in order to receive further interrupts. </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="structpc104sg__board.html#a36693aff3845eeafda21b00af0e62ca1">pc104sg_board::IntMask</a>.</p>

</div>
</div>
<a class="anchor" id="a2077081dfbe4d67b39c8a0a743b5f27f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setHeartBeatOutput </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>, <a class="el" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198">readDPRAM()</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a2077081dfbe4d67b39c8a0a743b5f27f_cgraph.png" border="0" usemap="#pc104sg_8c_a2077081dfbe4d67b39c8a0a743b5f27f_cgraph" alt=""/></div>
<map name="pc104sg_8c_a2077081dfbe4d67b39c8a0a743b5f27f_cgraph" id="pc104sg_8c_a2077081dfbe4d67b39c8a0a743b5f27f_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198" title="Read dual port RAM. " alt="" coords="207,5,303,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="206,56,303,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adb929ec8d4c69d83a4b4d9134ff41374"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setMajorTime </td>
          <td>(</td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The major time consists of the day-of-year, hour, minute and second fields. </p>
<p>Ideally they are set via the time-code input, but this function can be used if there is no time-code.</p>
<p>The sub-second values are determined from the PPS input, and I see no way to change them if there is no PPS or time-code. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a75c860b5cc713524f14228979c50b6a9">pc104sg_board::clockState</a>, <a class="el" href="structpc104sg__board.html#a45c980845c2fcf94d08442e345211fd7">pc104sg_board::lastStatus</a>, <a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62">setYear()</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>, and <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_adb929ec8d4c69d83a4b4d9134ff41374_cgraph.png" border="0" usemap="#pc104sg_8c_adb929ec8d4c69d83a4b4d9134ff41374_cgraph" alt=""/></div>
<map name="pc104sg_8c_adb929ec8d4c69d83a4b4d9134ff41374_cgraph" id="pc104sg_8c_adb929ec8d4c69d83a4b4d9134ff41374_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62" title="Get external event time. " alt="" coords="163,5,231,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="281,31,378,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a318a007c64a1bd79e457a01c703690bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setPrimarySyncReference </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the primary time reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>0=PPS is primary time reference, 1=time code is primary </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198">readDPRAM()</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a318a007c64a1bd79e457a01c703690bb_cgraph.png" border="0" usemap="#pc104sg_8c_a318a007c64a1bd79e457a01c703690bb_cgraph" alt=""/></div>
<map name="pc104sg_8c_a318a007c64a1bd79e457a01c703690bb_cgraph" id="pc104sg_8c_a318a007c64a1bd79e457a01c703690bb_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198" title="Read dual port RAM. " alt="" coords="241,5,337,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="241,56,338,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae2ec41a4045a974e5c6f4ccf7ee2f0cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int setRate2Output </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="sing_8cc.html#a0b872fb569a8d6ca3c6e55e3d7182e57">rate</a>, <a class="el" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198">readDPRAM()</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_ae2ec41a4045a974e5c6f4ccf7ee2f0cb_cgraph.png" border="0" usemap="#pc104sg_8c_ae2ec41a4045a974e5c6f4ccf7ee2f0cb_cgraph" alt=""/></div>
<map name="pc104sg_8c_ae2ec41a4045a974e5c6f4ccf7ee2f0cb_cgraph" id="pc104sg_8c_ae2ec41a4045a974e5c6f4ccf7ee2f0cb_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198" title="Read dual port RAM. " alt="" coords="177,5,273,32"/><area shape="rect" id="node3" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="177,56,274,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9aa0f7f6e66c028b3842c03411f8fc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setSoftTickers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtimeval32.html">timeval32</a> *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>round</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the software clock and the tasklet loop counter based on a clock value in a timeval struct. </p>
<p>This function is called by the bottom half tasklet if clockAction==RESET_COUNTERS.</p>
<p>Note: we are seeing sub-millisecond agreement between the IRIG register clocks and the system clock (conditioned by NTP), with a GPS-conditioned timeserver providing the IRIG and NTP references.</p>
<p>This function sets TMsecClockTicker from the timeval. </p>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="sing_8cc.html#a7cd7c66065ead3daabafb674047c78a8">if()</a>, <a class="el" href="pc104sg_8c.html#af9a70e38dd38b1feafb4c4d80f9ce9f0">MAX_TASKLET_COUNTER</a>, <a class="el" href="structpc104sg__board.html#a289d78c106aa1025cbbbe7cd80d515f5">pc104sg_board::ndtLast</a>, <a class="el" href="structpc104sg__board.html#a18984b41f8278596aa812f1e98dc858b">pc104sg_board::ndtNSecs</a>, <a class="el" href="structpc104sg__board.html#a54f8690eeb825494a148af112cd3b8e5">pc104sg_board::pending100Hz</a>, <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>, <a class="el" href="structpc104sg__status.html#a12b7549c34ece1549edd9a7dfa139c6a">pc104sg_status::softwareClockResets</a>, <a class="el" href="structpc104sg__board.html#a6f8c658abaaf9a432a01cfd7531a0e39">pc104sg_board::status</a>, <a class="el" href="pc104sg_8c.html#a8ecc3f5e4c4ea6dc0838decbae13effc">TMSEC_PER_SOFT_TIC</a>, <a class="el" href="structpc104sg__board.html#a3acbf8f28a1878ba834fa7368a12ed9f">pc104sg_board::TMsecClockTicker</a>, <a class="el" href="types_8h.html#a3f094c03554d08ebe28d4f7b2ed9acd8">TMSECS_PER_DAY</a>, <a class="el" href="types_8h.html#aba6ce7349e8a78a30dcdd114a383db87">TMSECS_PER_SEC</a>, <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>, and <a class="el" href="types_8h.html#a6d73c358b9d88e4a29614a740af4617b">USECS_PER_TMSEC</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_ac9aa0f7f6e66c028b3842c03411f8fc8_cgraph.png" border="0" usemap="#pc104sg_8c_ac9aa0f7f6e66c028b3842c03411f8fc8_cgraph" alt=""/></div>
<map name="pc104sg_8c_ac9aa0f7f6e66c028b3842c03411f8fc8_cgraph" id="pc104sg_8c_ac9aa0f7f6e66c028b3842c03411f8fc8_cgraph">
<area shape="rect" id="node2" href="sing_8cc.html#a7cd7c66065ead3daabafb674047c78a8" title="if" alt="" coords="166,5,205,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a47acaa00ccc88f829fa6730daf6f17a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setTimeCodeInputSelect </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a47acaa00ccc88f829fa6730daf6f17a1_cgraph.png" border="0" usemap="#pc104sg_8c_a47acaa00ccc88f829fa6730daf6f17a1_cgraph" alt=""/></div>
<map name="pc104sg_8c_a47acaa00ccc88f829fa6730daf6f17a1_cgraph" id="pc104sg_8c_a47acaa00ccc88f829fa6730daf6f17a1_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="233,5,330,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad1d97dfdfffe705858d994fe50095a62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int setYear </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get external event time. </p>
<p>set the year fields in Dual Port RAM. </p>

<p>References <a class="el" href="pc104sg_8c.html#afa325a9d2d9591f46ecf9a5784b58c58">StaticYear</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>, and <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_ad1d97dfdfffe705858d994fe50095a62_cgraph.png" border="0" usemap="#pc104sg_8c_ad1d97dfdfffe705858d994fe50095a62_cgraph" alt=""/></div>
<map name="pc104sg_8c_ad1d97dfdfffe705858d994fe50095a62_cgraph" id="pc104sg_8c_ad1d97dfdfffe705858d994fe50095a62_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e" title="Set a value in dual port RAM. " alt="" coords="123,5,221,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aef5abbfb2b7452e89344e147b0ee88fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timespecToirig </td>
          <td>(</td>
          <td class="paramtype">const struct timespec *&#160;</td>
          <td class="paramname"><em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Break a struct <a class="el" href="structtimeval32.html">timeval32</a> into the fields of a struct irigTime. </p>
<p>This uses some code from glibc/time routines. </p>

<p>References <a class="el" href="pc104sg_8c.html#a08e34981bd911e8f61169bae496fdb14">LEAPS_THRU_END_OF</a>, <a class="el" href="pc104sg_8c.html#a6703e9797b10e29b0d263aeb823ef076">my_isleap</a>, <a class="el" href="types_8h.html#a27003ea6e0fb031d8d5fca97e29d1bc4">NSECS_PER_MSEC</a>, <a class="el" href="types_8h.html#a58f65626d5459f04fd48b81fd5315180">NSECS_PER_USEC</a>, <a class="el" href="pc104sg_8c.html#ae6bc10904b2b09a717f1fb81cce017de">SECS_PER_DAY</a>, and <a class="el" href="pc104sg_8c.html#a11528d10d5838afd2d0ec2f5841167cf">SECS_PER_HOUR</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a3721fb10b228d8970ff9ac1a8d5acef8">timeval32Toirig()</a>, and <a class="el" href="pc104sg_8c.html#a42c439fe41aa10b813fb26efea64beab">timevalToirig()</a>.</p>

</div>
</div>
<a class="anchor" id="a3721fb10b228d8970ff9ac1a8d5acef8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timeval32Toirig </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structtimeval32.html">timeval32</a> *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="types_8h.html#a58f65626d5459f04fd48b81fd5315180">NSECS_PER_USEC</a>, <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>, <a class="el" href="structtimeval32.html#a69d903efd9f85e5535902f540e4f1927">timeval32::tv_sec</a>, and <a class="el" href="structtimeval32.html#a8000eef540ffdffe3964670f1c56222b">timeval32::tv_usec</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a3721fb10b228d8970ff9ac1a8d5acef8_cgraph.png" border="0" usemap="#pc104sg_8c_a3721fb10b228d8970ff9ac1a8d5acef8_cgraph" alt=""/></div>
<map name="pc104sg_8c_a3721fb10b228d8970ff9ac1a8d5acef8_cgraph" id="pc104sg_8c_a3721fb10b228d8970ff9ac1a8d5acef8_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb" title="Break a struct timeval32 into the fields of a struct irigTime. " alt="" coords="171,5,285,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a42c439fe41aa10b813fb26efea64beab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timevalToirig </td>
          <td>(</td>
          <td class="paramtype">const struct timeval *&#160;</td>
          <td class="paramname"><em>tv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct irigTime *&#160;</td>
          <td class="paramname"><em>ti</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>References <a class="el" href="types_8h.html#a58f65626d5459f04fd48b81fd5315180">NSECS_PER_USEC</a>, and <a class="el" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb">timespecToirig()</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="pc104sg_8c_a42c439fe41aa10b813fb26efea64beab_cgraph.png" border="0" usemap="#pc104sg_8c_a42c439fe41aa10b813fb26efea64beab_cgraph" alt=""/></div>
<map name="pc104sg_8c_a42c439fe41aa10b813fb26efea64beab_cgraph" id="pc104sg_8c_a42c439fe41aa10b813fb26efea64beab_cgraph">
<area shape="rect" id="node2" href="pc104sg_8c.html#aef5abbfb2b7452e89344e147b0ee88fb" title="Break a struct timeval32 into the fields of a struct irigTime. " alt="" coords="155,5,269,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0aacc0145154de250d49a3def0888af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int unregister_irig_callback </td>
          <td>(</td>
          <td class="paramtype">struct irig_callback *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modules call this function to dequeue their callbacks. </p>
<p>A callback function can cancel itself, or any other callback function. </p>
<dl class="section return"><dt>Returns</dt><dd>0: OK, but callback might be called once more. Do flush_irig_callback to wait until it is definitely finished. &lt;0: errno </dd></dl>

<p>References <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, <a class="el" href="structpc104sg__board.html#a7fdfe2cb60cb85d4c8d0132f3a8fc595">pc104sg_board::cblist_lock</a>, <a class="el" href="irigclock_8h.html#abe7cb1509e39038b6d56e023da754e72ad522600fb5cdf6e5db7e7cfe975c0a57">IRIG_NUM_RATES</a>, <a class="el" href="structpc104sg__board.html#a11df66727c4ce48f19bc76213bc85535">pc104sg_board::nPendingCallbackChanges</a>, <a class="el" href="structpc104sg__board.html#a5f8087bda8ef7f15c0dc80f34ab8cb7d">pc104sg_board::nPendingRemoves</a>, and <a class="el" href="structpc104sg__board.html#aa78277868aeec90a5f8e7cd1acec8e84">pc104sg_board::pendingRemoves</a>.</p>

<p>Referenced by <a class="el" href="main_8c.html#a2ba2c64b70757fd2e3de7b82ce7a97c4">arinc_cleanup()</a>, <a class="el" href="main_8c.html#a7dfb98de15331c96a44dcdb808855106">arinc_release()</a>, <a class="el" href="mesa_8c.html#a876a3144a3c4e936e4b9b55ee5f5f436">close_ports()</a>, <a class="el" href="mesa_8c.html#a060aaeeada79906fd2a0363047d93f69">mesa_ioctl()</a>, <a class="el" href="ncar__a2d_8c.html#a6828b96eaf1d6bad3a9ceea17c949bf4">ncar_a2d_cleanup()</a>, <a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup()</a>, <a class="el" href="ncar__a2d_8c.html#a38cffd6b64aa5ab64a54870a9e252935">resetBoard()</a>, <a class="el" href="ncar__a2d_8c.html#ac621d95948eff6a7ee50914e9eac8159">stopBoard()</a>, and <a class="el" href="ncar__a2d_8c.html#a3a1c798bd42dc6d690c497e630584d9d">waitFor1PPS()</a>.</p>

</div>
</div>
<a class="anchor" id="a57fdfe15265a20ca1347a96d84dbe25e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int writeDPRAM </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a value in dual port RAM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>dual-port RAM address to write</td></tr>
  </table>
  </dd>
</dl>
<p>Called by: <a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput(int rate)</a> <a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb" title="Set the primary time reference. ">setPrimarySyncReference(unsigned char val)</a> <a class="el" href="pc104sg_8c.html#a47acaa00ccc88f829fa6730daf6f17a1">setTimeCodeInputSelect(unsigned char val)</a> <a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output(int rate)</a> <a class="el" href="pc104sg_8c.html#a5d2c89e71466805c8f6a69ab85d6a75d">counterRejam(void)</a> module init <a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62" title="Get external event time. ">setYear(int val)</a> <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374" title="The major time consists of the day-of-year, hour, minute and second fields. ">setMajorTime(struct irigTime* ti)</a> ioctl </p>

<p>References <a class="el" href="structpc104sg__board.html#a5fbc1fccd4e4a09ac550b1fc026de99e">pc104sg_board::addr</a>, <a class="el" href="pc104sg_8c.html#aa8496433d9b837a27d49b1505492c93f">board</a>, and <a class="el" href="structpc104sg__board.html#aabef74cb7adf74de93a1c7ad7c6a8cb0">pc104sg_board::lock</a>.</p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#a5d2c89e71466805c8f6a69ab85d6a75d">counterRejam()</a>, <a class="el" href="pc104sg_8c.html#a2077081dfbe4d67b39c8a0a743b5f27f">setHeartBeatOutput()</a>, <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime()</a>, <a class="el" href="pc104sg_8c.html#a318a007c64a1bd79e457a01c703690bb">setPrimarySyncReference()</a>, <a class="el" href="pc104sg_8c.html#ae2ec41a4045a974e5c6f4ccf7ee2f0cb">setRate2Output()</a>, <a class="el" href="pc104sg_8c.html#a47acaa00ccc88f829fa6730daf6f17a1">setTimeCodeInputSelect()</a>, and <a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62">setYear()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a8d6910fa51517497a3f2ba6b5d27d726"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int A2DClockFreq = 10000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa8496433d9b837a27d49b1505492c93f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structpc104sg__board.html">pc104sg_board</a> board</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#aaa653a40c114547800a6bf381440cb56">checkSoftTicker()</a>, <a class="el" href="pc104sg_8c.html#a011f0657825d40831b8eac637e2bcea5">clockStateString()</a>, <a class="el" href="pc104sg_8c.html#ac928e2ad48c95a94c86aa08962f32410">disableAllInts()</a>, <a class="el" href="pc104sg_8c.html#aa73b925b4cef457efc768966179f095b">doCallbacklist()</a>, <a class="el" href="pc104sg_8c.html#a44ac6443e8cb3692ba6fe664d1307d9e">doResyncCallbacks()</a>, <a class="el" href="pc104sg_8c.html#a274ddac1815204b14f718e7de3dbefb8">enableHeartBeatInt()</a>, <a class="el" href="pc104sg_8c.html#aaf72cc4ce7d06abb88b67911ad702f9d">flush_irig_callbacks()</a>, <a class="el" href="pc104sg_8c.html#a4a6e50ded9d3f5c70e8bd2b7409b5370">free_callbacks()</a>, <a class="el" href="pc104sg_8c.html#abdb74e80c66172da496b8908c84ab2b8">get_irig_time()</a>, <a class="el" href="pc104sg_8c.html#aa9376577710fef9a923b2bfcb8cf7bc8">getRequestedDPRAM()</a>, <a class="el" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b">getTimeFields()</a>, <a class="el" href="pc104sg_8c.html#aad3c2e372d016be6dd82b8dd834f1ee8">getTimeUsec()</a>, <a class="el" href="pc104sg_8c.html#a0d33fce3e2b16674e7015304617be580">handlePendingCallbacks()</a>, <a class="el" href="pc104sg_8c.html#af1a9975a8b7e0f46a701e359b0e7e4aa">irig_clock_gettime()</a>, <a class="el" href="pc104sg_8c.html#a532b77817b333266c5de6eb671c7ea86">oneHzFunction()</a>, <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, <a class="el" href="pc104sg_8c.html#aaab00cb0f54ed7cb6a67e20eab87281e">pc104sg_cleanup()</a>, <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>, <a class="el" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl()</a>, <a class="el" href="pc104sg_8c.html#aaf941eb0fe5482665c540a976d2b220a">pc104sg_isr()</a>, <a class="el" href="pc104sg_8c.html#a18bccf2dde74934c01bb1fdeccfedec1">pc104sg_open()</a>, <a class="el" href="pc104sg_8c.html#ae887d53a79983eaacf707bcb3abc2999">pc104sg_release()</a>, <a class="el" href="pc104sg_8c.html#a1135b8eef3e16d1c2e3b2b26380e6198">readDPRAM()</a>, <a class="el" href="pc104sg_8c.html#a6be98cca820db8ed3d7b06aecfafc2ab">register_irig_callback()</a>, <a class="el" href="pc104sg_8c.html#ad8f771cfe673267603932b907013adeb">requestDPRAM()</a>, <a class="el" href="pc104sg_8c.html#aefe6cedb99237a8eda75efad5dfa4468">requestExtendedStatus()</a>, <a class="el" href="pc104sg_8c.html#a59be4e9f51e3e4c7cba41fd4244ab801">resetHeartBeatLatch()</a>, <a class="el" href="pc104sg_8c.html#a89efb62061998a5877220ef066f5578a">resetMatchLatch()</a>, <a class="el" href="pc104sg_8c.html#adb929ec8d4c69d83a4b4d9134ff41374">setMajorTime()</a>, <a class="el" href="pc104sg_8c.html#ac9aa0f7f6e66c028b3842c03411f8fc8">setSoftTickers()</a>, <a class="el" href="pc104sg_8c.html#ae0aacc0145154de250d49a3def0888af">unregister_irig_callback()</a>, and <a class="el" href="pc104sg_8c.html#a57fdfe15265a20ca1347a96d84dbe25e">writeDPRAM()</a>.</p>

</div>
</div>
<a class="anchor" id="a7629105fe7a35b297bd1df5304d2e4d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* driver_name = &quot;pc104sg&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2bb8e7302c29c651ba6823416ca50a32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int IoPort = 0x2a0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a0948792bb02e130a71d831c860899f32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Irq = 10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="aa722c328a9b59473e042cd5405be4cf3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct file_operations pc104sg_fops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        .owner = THIS_MODULE,</div>
<div class="line">        .read = <a class="code" href="pc104sg_8c.html#a5e3b129ef3a997869e581bdd3b3a247b">pc104sg_read</a>,</div>
<div class="line">        .poll = <a class="code" href="pc104sg_8c.html#ac9d9bfcb1413f0ffd59dffaa449c06a3">pc104sg_poll</a>,</div>
<div class="line">        .open = <a class="code" href="pc104sg_8c.html#a18bccf2dde74934c01bb1fdeccfedec1">pc104sg_open</a>,</div>
<div class="line">        .unlocked_ioctl = <a class="code" href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl</a>,</div>
<div class="line">        .release = <a class="code" href="pc104sg_8c.html#ae887d53a79983eaacf707bcb3abc2999">pc104sg_release</a>,</div>
<div class="line">        .llseek  = no_llseek,</div>
<div class="line">}</div>
<div class="ttc" id="pc104sg_8c_html_ae887d53a79983eaacf707bcb3abc2999"><div class="ttname"><a href="pc104sg_8c.html#ae887d53a79983eaacf707bcb3abc2999">pc104sg_release</a></div><div class="ttdeci">static int pc104sg_release(struct inode *inode, struct file *filp)</div><div class="ttdef"><b>Definition:</b> pc104sg.c:2255</div></div>
<div class="ttc" id="pc104sg_8c_html_ae8c8b15054d75a173e58bc7f30a291cd"><div class="ttname"><a href="pc104sg_8c.html#ae8c8b15054d75a173e58bc7f30a291cd">pc104sg_ioctl</a></div><div class="ttdeci">static long pc104sg_ioctl(struct file *filp, unsigned int cmd, unsigned long arg)</div><div class="ttdef"><b>Definition:</b> pc104sg.c:2302</div></div>
<div class="ttc" id="pc104sg_8c_html_a18bccf2dde74934c01bb1fdeccfedec1"><div class="ttname"><a href="pc104sg_8c.html#a18bccf2dde74934c01bb1fdeccfedec1">pc104sg_open</a></div><div class="ttdeci">static int pc104sg_open(struct inode *inode, struct file *filp)</div><div class="ttdef"><b>Definition:</b> pc104sg.c:2212</div></div>
<div class="ttc" id="pc104sg_8c_html_a5e3b129ef3a997869e581bdd3b3a247b"><div class="ttname"><a href="pc104sg_8c.html#a5e3b129ef3a997869e581bdd3b3a247b">pc104sg_read</a></div><div class="ttdeci">static ssize_t pc104sg_read(struct file *filp, char __user *buf, size_t count, loff_t *f_pos)</div><div class="ttdef"><b>Definition:</b> pc104sg.c:2291</div></div>
<div class="ttc" id="pc104sg_8c_html_ac9d9bfcb1413f0ffd59dffaa449c06a3"><div class="ttname"><a href="pc104sg_8c.html#ac9d9bfcb1413f0ffd59dffaa449c06a3">pc104sg_poll</a></div><div class="ttdeci">static unsigned int pc104sg_poll(struct file *filp, poll_table *wait)</div><div class="ttdef"><b>Definition:</b> pc104sg.c:2274</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06e980bbaeb04990c34e7d831c3dbc9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ReadClock = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index into TMsecClock of the value to be read. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, and <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
<a class="anchor" id="afa325a9d2d9591f46ecf9a5784b58c58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int StaticYear</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The year field in the pc104sg time registers ranges from 0-99, so we keep track of the century. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#ab63a2129e5c40030d8a7455b9f38674b">getTimeFields()</a>, and <a class="el" href="pc104sg_8c.html#ad1d97dfdfffe705858d994fe50095a62">setYear()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b0b519936819c0b422e6938a779efd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int TMsecClock[2] = { 0, 0 }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A toggle buffer containing the current clock value in tenths of milliseconds since UTC midnight. </p>

<p>Referenced by <a class="el" href="pc104sg_8c.html#aed23bdab82ef3a1206f5890b2c0d20ed">pc104sg_bh_100Hz()</a>, and <a class="el" href="pc104sg_8c.html#acc332f30a2b0de61fb66114ac2da63d9">pc104sg_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
